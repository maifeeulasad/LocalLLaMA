import{j as e}from"./index-CNyNkRpk.js";import{R as t}from"./RedditPostRenderer-Dza0u9i2.js";import"./index-BUchu_-K.js";const l=JSON.parse(`[{"kind":"Listing","data":{"after":null,"dist":1,"modhash":"","geo_filter":"","children":[{"kind":"t3","data":{"approved_at_utc":null,"subreddit":"LocalLLaMA","selftext":"From time to time, often months between it. I start a roleplay with a local LLM and when I do this I chat for a while. And since two years I run every time into the same issue: After a while the roleplay turned into a \\"how do I fix the LLM from repeating itself too much\\" or into a \\"Post an answer, wait for the LLM answer, edit the answer more and more\\" game.\\n\\nI really hate this crap. I want to have fun and not want to always closely looking what the LLM answers and compare it the previous answer so that the LLM never tend to go down this stupid repeating rabbit hole...\\n\\nOne idea for a solution that I have would be to use the LLM answer an let it check that one with another prompt itself, let it compare with maybe the last 10 LLM answers before that one and let it rephrase the answer when some phrases are too similar.\\n\\nAt least that would be my first quick idea which could work. Even when it would make the answer time even longer. But for that you would need to write your own \\"Chatbot\\" (well, on that I work from time to time a bit - and such things hold be also back from it).\\n\\nRun into that problem minutes ago and it ruined my roleplay, again. This time I used Mistral 3.2, but it didn't really matter what LLM I use. It always tend to slowly repeate stuff before you really notice it without analyzing every answer (what already would ruin the RP). It is especially annoying because the first hour or so (depends on the LLM and the settings) it works without any problems and so you can have a lot of fun.\\n\\nWhat are your experiences when you do longer roleplay or maybe even endless roleplays you continue every time? I love to do this, but that ruins it for me every time.\\n\\nAnd before anyone comes with that up: no, any setting that should avoid repetion did not fix that problem, It only delays it at best, but it didn't disappear.","user_reports":[],"saved":false,"mod_reason_title":null,"gilded":0,"clicked":false,"title":"Will this ever be fixed? RP repetition","link_flair_richtext":[{"e":"text","t":"Discussion"}],"subreddit_name_prefixed":"r/LocalLLaMA","hidden":false,"pwls":6,"link_flair_css_class":"","downs":0,"thumbnail_height":null,"top_awarded_type":null,"hide_score":false,"name":"t3_1ls1hd2","quarantine":false,"link_flair_text_color":"light","upvote_ratio":0.68,"author_flair_background_color":null,"subreddit_type":"public","ups":9,"total_awards_received":0,"media_embed":{},"thumbnail_width":null,"author_flair_template_id":null,"is_original_content":false,"author_fullname":"t2_j0e2r","secure_media":null,"is_reddit_media_domain":false,"is_meta":false,"category":null,"secure_media_embed":{},"link_flair_text":"Discussion","can_mod_post":false,"score":9,"approved_by":null,"is_created_from_ads_ui":false,"author_premium":false,"thumbnail":"self","edited":false,"author_flair_css_class":null,"author_flair_richtext":[],"gildings":{},"content_categories":null,"is_self":true,"mod_note":null,"created":1751689775,"link_flair_type":"richtext","wls":6,"removed_by_category":null,"banned_by":null,"author_flair_type":"text","domain":"self.LocalLLaMA","allow_live_comments":false,"selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\\"md\\"&gt;&lt;p&gt;From time to time, often months between it. I start a roleplay with a local LLM and when I do this I chat for a while. And since two years I run every time into the same issue: After a while the roleplay turned into a &amp;quot;how do I fix the LLM from repeating itself too much&amp;quot; or into a &amp;quot;Post an answer, wait for the LLM answer, edit the answer more and more&amp;quot; game.&lt;/p&gt;\\n\\n&lt;p&gt;I really hate this crap. I want to have fun and not want to always closely looking what the LLM answers and compare it the previous answer so that the LLM never tend to go down this stupid repeating rabbit hole...&lt;/p&gt;\\n\\n&lt;p&gt;One idea for a solution that I have would be to use the LLM answer an let it check that one with another prompt itself, let it compare with maybe the last 10 LLM answers before that one and let it rephrase the answer when some phrases are too similar.&lt;/p&gt;\\n\\n&lt;p&gt;At least that would be my first quick idea which could work. Even when it would make the answer time even longer. But for that you would need to write your own &amp;quot;Chatbot&amp;quot; (well, on that I work from time to time a bit - and such things hold be also back from it).&lt;/p&gt;\\n\\n&lt;p&gt;Run into that problem minutes ago and it ruined my roleplay, again. This time I used Mistral 3.2, but it didn&amp;#39;t really matter what LLM I use. It always tend to slowly repeate stuff before you really notice it without analyzing every answer (what already would ruin the RP). It is especially annoying because the first hour or so (depends on the LLM and the settings) it works without any problems and so you can have a lot of fun.&lt;/p&gt;\\n\\n&lt;p&gt;What are your experiences when you do longer roleplay or maybe even endless roleplays you continue every time? I love to do this, but that ruins it for me every time.&lt;/p&gt;\\n\\n&lt;p&gt;And before anyone comes with that up: no, any setting that should avoid repetion did not fix that problem, It only delays it at best, but it didn&amp;#39;t disappear.&lt;/p&gt;\\n&lt;/div&gt;&lt;!-- SC_ON --&gt;","likes":null,"suggested_sort":null,"banned_at_utc":null,"view_count":null,"archived":false,"no_follow":false,"is_crosspostable":false,"pinned":false,"over_18":false,"all_awardings":[],"awarders":[],"media_only":false,"link_flair_template_id":"5f921ea4-c7bc-11ed-9c23-3a00622979b4","can_gild":false,"spoiler":false,"locked":false,"author_flair_text":null,"treatment_tags":[],"visited":false,"removed_by":null,"num_reports":null,"distinguished":null,"subreddit_id":"t5_81eyvm","author_is_blocked":false,"mod_reason_by":null,"removal_reason":null,"link_flair_background_color":"#646d73","id":"1ls1hd2","is_robot_indexable":true,"num_duplicates":0,"report_reasons":null,"author":"Blizado","discussion_type":null,"num_comments":26,"send_replies":true,"media":null,"contest_mode":false,"author_patreon_flair":false,"author_flair_text_color":null,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/","stickied":false,"url":"https://www.reddit.com/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/","subreddit_subscribers":494986,"created_utc":1751689775,"num_crossposts":0,"mod_reports":[],"is_video":false}}],"before":null}},{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1ie574","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Blizado","can_mod_post":false,"created_utc":1751740406,"send_replies":true,"parent_id":"t1_n1flffj","score":2,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Thanks, I will have a look on this. But it did not really matter if it is a Mistral 3 model, I had this problems with all LLMs, older Mistral, Llama models and other LLM families, normal and finetunes. All LLMs tend to go into that repetion hell, it is only a question when. A user described that very well in his answer.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ie574","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Thanks, I will have a look on this. But it did not really matter if it is a Mistral 3 model, I had this problems with all LLMs, older Mistral, Llama models and other LLM families, normal and finetunes. All LLMs tend to go into that repetion hell, it is only a question when. A user described that very well in his answer.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1ie574/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751740406,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fq044","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"AppearanceHeavy6724","can_mod_post":false,"created_utc":1751700831,"send_replies":true,"parent_id":"t1_n1flffj","score":2,"author_fullname":"t2_uz37qfx5","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"&gt; Unfortunately, your biggest problem here is Mistral 3.2: despite their claims, Mistral have not fully fixed repetition issues in Mistral 3.2, and all Mistral 3 \\n\\nNope, they did not. \\n\\n&gt; XTC in combination with truncating samplers on low values.\\n\\nThis one was useful to counteract repetitions in my experience with Small 2501.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fq044","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;blockquote&gt;\\n&lt;p&gt;Unfortunately, your biggest problem here is Mistral 3.2: despite their claims, Mistral have not fully fixed repetition issues in Mistral 3.2, and all Mistral 3 &lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;Nope, they did not. &lt;/p&gt;\\n\\n&lt;blockquote&gt;\\n&lt;p&gt;XTC in combination with truncating samplers on low values.&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;This one was useful to counteract repetitions in my experience with Small 2501.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fq044/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751700831,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1flffj","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"dobomex761604","can_mod_post":false,"created_utc":1751698145,"send_replies":true,"parent_id":"t3_1ls1hd2","score":9,"author_fullname":"t2_o0bqaw8dp","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Unfortunately,  your biggest problem here is Mistral 3.2: despite their claims, Mistral have not fully fixed repetition issues in Mistral 3.2, and all Mistral 3 models have more noticeable repetition over long context (not just RP, stories too). I don't think there's a definitive solution here, but here are ideas that were tested:\\n\\n1. Gaussian noise - either as a separate sampler, or as a part of a truncating sampler (like \\\\\`min\\\\_p\\\\\`);\\n2. Minimum tokens output control (can mess up with EOS tokens);\\n3. XTC in combination with truncating samplers on low values.\\n4. Some form of \\"confidence\\" control, i.e. how closer a selected token was to 100% probability.\\n\\nGenerally speaking, you will have to experiment with sampling methods in order to keep the number of probable candidates high enough to be able (still not a guarantee) to get away from repetition.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1flffj","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Unfortunately,  your biggest problem here is Mistral 3.2: despite their claims, Mistral have not fully fixed repetition issues in Mistral 3.2, and all Mistral 3 models have more noticeable repetition over long context (not just RP, stories too). I don&amp;#39;t think there&amp;#39;s a definitive solution here, but here are ideas that were tested:&lt;/p&gt;\\n\\n&lt;ol&gt;\\n&lt;li&gt;Gaussian noise - either as a separate sampler, or as a part of a truncating sampler (like \`min_p\`);&lt;/li&gt;\\n&lt;li&gt;Minimum tokens output control (can mess up with EOS tokens);&lt;/li&gt;\\n&lt;li&gt;XTC in combination with truncating samplers on low values.&lt;/li&gt;\\n&lt;li&gt;Some form of &amp;quot;confidence&amp;quot; control, i.e. how closer a selected token was to 100% probability.&lt;/li&gt;\\n&lt;/ol&gt;\\n\\n&lt;p&gt;Generally speaking, you will have to experiment with sampling methods in order to keep the number of probable candidates high enough to be able (still not a guarantee) to get away from repetition.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1flffj/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751698145,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":9}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fz3tc","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"stoppableDissolution","can_mod_post":false,"created_utc":1751706402,"send_replies":true,"parent_id":"t1_n1fo46e","score":6,"author_fullname":"t2_1n0su21k4z","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I am actually quite surprised noone yet made an end-to-end RP agent. People are just inefficiently reinventing the wheel for themselves","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fz3tc","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I am actually quite surprised noone yet made an end-to-end RP agent. People are just inefficiently reinventing the wheel for themselves&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fz3tc/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706402,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":6}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1ihz0r","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Blizado","can_mod_post":false,"created_utc":1751741663,"send_replies":true,"parent_id":"t1_n1fo46e","score":2,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Yeah, that was my plan anyway with my own project. I should take that as motivation to go back to it.\\n\\nIndeed are very AI tools not very smart. They us a LLM to let generate answers an put in some informations from outside for that, but I rarely see that AI tools use the LLM for other tasks inside this tool. For examply my plan is that the LLM generats in the background informations on the go for the roleplay when they are needed and wright them into the VectorDB for the \\"main\\" (same) LLM that generates the chat answers. For example on a sci-fi space roleplay you land on a unknown planet with a flora, all you know at first without scanning is how it looks like so you let the LLM generate only informations how the planet looks like with very little flora informations at first. That should help the AI character to make less things up and know more as it should know (of course you need a matching systemprompt).\\n\\nWell, I collected a lot of ideas over the last 2 years for such an AI chatbot with advanced roleplay mechanics. But turn the ideas into a real working project is something different.\\n\\nYou could use at least Kobold/Tabby as a pure LLM API like SillyTavern use them. I also don't know a frontend that is really more as simple a basic chatbot with some \\"simple\\" addons. SillyTavern has RAG and a VectorDB with that I play around to learn some stuff from it for my own project, but it is too limited and too much a \\"I want to be everything\\" with the typical \\"can do a lot but nothing really\\" effect.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ihz0r","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yeah, that was my plan anyway with my own project. I should take that as motivation to go back to it.&lt;/p&gt;\\n\\n&lt;p&gt;Indeed are very AI tools not very smart. They us a LLM to let generate answers an put in some informations from outside for that, but I rarely see that AI tools use the LLM for other tasks inside this tool. For examply my plan is that the LLM generats in the background informations on the go for the roleplay when they are needed and wright them into the VectorDB for the &amp;quot;main&amp;quot; (same) LLM that generates the chat answers. For example on a sci-fi space roleplay you land on a unknown planet with a flora, all you know at first without scanning is how it looks like so you let the LLM generate only informations how the planet looks like with very little flora informations at first. That should help the AI character to make less things up and know more as it should know (of course you need a matching systemprompt).&lt;/p&gt;\\n\\n&lt;p&gt;Well, I collected a lot of ideas over the last 2 years for such an AI chatbot with advanced roleplay mechanics. But turn the ideas into a real working project is something different.&lt;/p&gt;\\n\\n&lt;p&gt;You could use at least Kobold/Tabby as a pure LLM API like SillyTavern use them. I also don&amp;#39;t know a frontend that is really more as simple a basic chatbot with some &amp;quot;simple&amp;quot; addons. SillyTavern has RAG and a VectorDB with that I play around to learn some stuff from it for my own project, but it is too limited and too much a &amp;quot;I want to be everything&amp;quot; with the typical &amp;quot;can do a lot but nothing really&amp;quot; effect.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1ihz0r/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751741663,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1ioc18","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mpasila","can_mod_post":false,"created_utc":1751743776,"send_replies":true,"parent_id":"t1_n1fo46e","score":1,"author_fullname":"t2_lhhagpdw","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Voxta I think is doing something pretty similar having it summarize the conversation after like hitting context length limit and also extracting any important memories (using an LLM) from it which is put into like a memory book vector database and it also will update memories if needed (though not perfect). But Voxta isn't free software but it does at least exist.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ioc18","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Voxta I think is doing something pretty similar having it summarize the conversation after like hitting context length limit and also extracting any important memories (using an LLM) from it which is put into like a memory book vector database and it also will update memories if needed (though not perfect). But Voxta isn&amp;#39;t free software but it does at least exist.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1ioc18/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751743776,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1j9m3j","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"GrungeWerX","can_mod_post":false,"created_utc":1751750832,"send_replies":true,"parent_id":"t1_n1fo46e","score":1,"author_fullname":"t2_7qduc583w","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Does n8n use mcp and could that be used to create a workflow that does the function you’re talking about?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1j9m3j","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Does n8n use mcp and could that be used to create a workflow that does the function you’re talking about?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1j9m3j/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751750832,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fo46e","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"WitAndWonder","can_mod_post":false,"created_utc":1751699704,"send_replies":true,"parent_id":"t3_1ls1hd2","score":9,"author_fullname":"t2_58u1t2z","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Create an agent that automatically summarizes scenes as you go, the same way actual human memory does, so that your context is massively compressed into a short-term (scene, word for word,) medium-term (maybe the last several scenes, slightly more detailed summaries,) and long-term (essentially archived memories with just the key points from each, focusing on important changes or information.) For even more realism and better performance you can maintain the medium-term summaries even after compressing them to the long-term stuff inside a RAG database and give the AI an MCP tool to go access relevant data itself when it needs details from a referenced past scene.\\n\\nThis will completely prevent degradation, but it does require you to likely have a custom platform that you put together, as I don't think Kobold or other free front-ends handle this kind of thing by default.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fo46e","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Create an agent that automatically summarizes scenes as you go, the same way actual human memory does, so that your context is massively compressed into a short-term (scene, word for word,) medium-term (maybe the last several scenes, slightly more detailed summaries,) and long-term (essentially archived memories with just the key points from each, focusing on important changes or information.) For even more realism and better performance you can maintain the medium-term summaries even after compressing them to the long-term stuff inside a RAG database and give the AI an MCP tool to go access relevant data itself when it needs details from a referenced past scene.&lt;/p&gt;\\n\\n&lt;p&gt;This will completely prevent degradation, but it does require you to likely have a custom platform that you put together, as I don&amp;#39;t think Kobold or other free front-ends handle this kind of thing by default.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fo46e/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751699704,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":9}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fa26u","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"computer-whisperer","can_mod_post":false,"created_utc":1751691836,"send_replies":true,"parent_id":"t3_1ls1hd2","score":5,"author_fullname":"t2_152nxo","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"This is a very common breakdown mode of LLMs. I have actually not seen a transformer-based model where this didn't occur, but how long it takes to degrade is quite variable and usually correlates with how good the model is in other respects. One thing to keep an eye on is what the logit distribution looks like as the conversation progresses. A healthy language model (in my experience) has a nice spread of options to pick from each token, while a model that has degraded will often reduce to only a single token getting the majority of the probability each step.\\n\\nI have ended up with deepseek v3 (8-bit with 1.5bit draft, running a bit slowly on a cpu-based inference node) for rp recently, and it is golden for at least 20k tokens (token sizes change from model to model, but this is quite a few messages back and forth). I went through a number of smaller models though that performed similarly, but I never had much success anywhere near 24B params. Notable ones I had good experiences with in the past were Command r+ and Chuluun-Qwen2.5-72B, playing with various quantizations to fit on my 2x24Gb GPU server.\\n\\nYour best bet is to play around with different models, and with different quantizations of larger models. Don't be afraid to run something that is too big for your gpu -- llama.cpp is plenty capable of offloading parts of it to cpu/ram, and for rp scenarios you typically don't need ludicrously fast inference.\\n\\nWatch out for bad prompting too -- each model has it's own precise way it prefers its context, and while it will work with any self-evident prompt structure it won't be as good or reliable unless you use the exact framing specified by the model's creators.\\n\\nTL;DR: This is very standard \\"unhappy/saturated model\\" behavior. Either get a better one (better quant, bigger model, etc), or look for ways you may be prompting it wrong.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fa26u","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;This is a very common breakdown mode of LLMs. I have actually not seen a transformer-based model where this didn&amp;#39;t occur, but how long it takes to degrade is quite variable and usually correlates with how good the model is in other respects. One thing to keep an eye on is what the logit distribution looks like as the conversation progresses. A healthy language model (in my experience) has a nice spread of options to pick from each token, while a model that has degraded will often reduce to only a single token getting the majority of the probability each step.&lt;/p&gt;\\n\\n&lt;p&gt;I have ended up with deepseek v3 (8-bit with 1.5bit draft, running a bit slowly on a cpu-based inference node) for rp recently, and it is golden for at least 20k tokens (token sizes change from model to model, but this is quite a few messages back and forth). I went through a number of smaller models though that performed similarly, but I never had much success anywhere near 24B params. Notable ones I had good experiences with in the past were Command r+ and Chuluun-Qwen2.5-72B, playing with various quantizations to fit on my 2x24Gb GPU server.&lt;/p&gt;\\n\\n&lt;p&gt;Your best bet is to play around with different models, and with different quantizations of larger models. Don&amp;#39;t be afraid to run something that is too big for your gpu -- llama.cpp is plenty capable of offloading parts of it to cpu/ram, and for rp scenarios you typically don&amp;#39;t need ludicrously fast inference.&lt;/p&gt;\\n\\n&lt;p&gt;Watch out for bad prompting too -- each model has it&amp;#39;s own precise way it prefers its context, and while it will work with any self-evident prompt structure it won&amp;#39;t be as good or reliable unless you use the exact framing specified by the model&amp;#39;s creators.&lt;/p&gt;\\n\\n&lt;p&gt;TL;DR: This is very standard &amp;quot;unhappy/saturated model&amp;quot; behavior. Either get a better one (better quant, bigger model, etc), or look for ways you may be prompting it wrong.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":true,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fa26u/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751691836,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":5}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1iifdz","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Blizado","can_mod_post":false,"created_utc":1751741812,"send_replies":true,"parent_id":"t1_n1fxzng","score":1,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Yeah, I also need to overwork my system prompt again after switching the model to Mistral 3.2. As always, different model, different setup to work best. So I guess that one is not perfect yet. Mistral 3.2 has a example system prompt linked, need to see if that could be helpful for roleplay, because it is of course no roleplay system prompt example.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1iifdz","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yeah, I also need to overwork my system prompt again after switching the model to Mistral 3.2. As always, different model, different setup to work best. So I guess that one is not perfect yet. Mistral 3.2 has a example system prompt linked, need to see if that could be helpful for roleplay, because it is of course no roleplay system prompt example.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1iifdz/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751741812,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fxzng","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"LagOps91","can_mod_post":false,"created_utc":1751705704,"send_replies":true,"parent_id":"t3_1ls1hd2","score":6,"author_fullname":"t2_3wi6j7vwh","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Mistral small is quite bad when it comes to repetition and I share your pain. The best experience I've had so far was with synthia s1. I have no idea what they did with that model, but it has far less repetition than the Gemma 3 it's based on. I never really needed to edit anything with that model. Add some system instructions about moving the story forward and you should be golden.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fxzng","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Mistral small is quite bad when it comes to repetition and I share your pain. The best experience I&amp;#39;ve had so far was with synthia s1. I have no idea what they did with that model, but it has far less repetition than the Gemma 3 it&amp;#39;s based on. I never really needed to edit anything with that model. Add some system instructions about moving the story forward and you should be golden.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fxzng/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751705704,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":6}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1iktyd","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Blizado","can_mod_post":false,"created_utc":1751742604,"send_replies":true,"parent_id":"t1_n1gc01v","score":1,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Well, we don't know what they tried all to remove it. I would really like to know so that I don't try out everything possible as well only to realize that it doesn't work.\\n\\nIt doesn't help anyone if everyone keeps their findings to themselves and people keep testing the same things that have been tested for a long time already and have been labeled as “doesn't work, dead end”. Only a waste of your lifetime and not a help for the open source community. And especially the smaller AI roleplay community have their own LLM problems.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1iktyd","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Well, we don&amp;#39;t know what they tried all to remove it. I would really like to know so that I don&amp;#39;t try out everything possible as well only to realize that it doesn&amp;#39;t work.&lt;/p&gt;\\n\\n&lt;p&gt;It doesn&amp;#39;t help anyone if everyone keeps their findings to themselves and people keep testing the same things that have been tested for a long time already and have been labeled as “doesn&amp;#39;t work, dead end”. Only a waste of your lifetime and not a help for the open source community. And especially the smaller AI roleplay community have their own LLM problems.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1iktyd/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751742604,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1gc01v","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"arekku255","can_mod_post":false,"created_utc":1751714105,"send_replies":true,"parent_id":"t3_1ls1hd2","score":2,"author_fullname":"t2_15rugs","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Most likely not. Latitude—the team behind AI dungeon has been around since December 2019 and even now, more than 5 years later people are still complaining about repetition.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gc01v","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Most likely not. Latitude—the team behind AI dungeon has been around since December 2019 and even now, more than 5 years later people are still complaining about repetition.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1gc01v/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751714105,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1iju8m","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Blizado","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1i097m","score":2,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Maybe, I normally don't go over 8K because of that. I also noticed quickly last year that a large context size didn't mean you can now use a lot larger context size for roleplay. Maybe you can, if you limit the chat history. But especially SillyTavern use a larger context only to fill in more Chat History. More History where the LLM can search for patterns which it then tend to repeate it too often, when I understand the repition problem right.\\n\\nI think by now 8K context size is enough for roleplaying, you should be able to fit all the important information in there if you work with RAG and a vector database, which is what I plan to do in my own project. We should also not forget that a larger context size also needs more VRAM.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1iju8m","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Maybe, I normally don&amp;#39;t go over 8K because of that. I also noticed quickly last year that a large context size didn&amp;#39;t mean you can now use a lot larger context size for roleplay. Maybe you can, if you limit the chat history. But especially SillyTavern use a larger context only to fill in more Chat History. More History where the LLM can search for patterns which it then tend to repeate it too often, when I understand the repition problem right.&lt;/p&gt;\\n\\n&lt;p&gt;I think by now 8K context size is enough for roleplaying, you should be able to fit all the important information in there if you work with RAG and a vector database, which is what I plan to do in my own project. We should also not forget that a larger context size also needs more VRAM.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1iju8m/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751742277,"author_flair_text":null,"treatment_tags":[],"created_utc":1751742277,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1i097m","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"YearZero","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1f7ttx","score":2,"author_fullname":"t2_4kpsn","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"True, but small models also have a terrible time utilizing their large context:  \\n[https://contextarena.ai/?showExtra=true](https://contextarena.ai/?showExtra=true)\\n\\nAfter about 16k or 32k at most they break down hard. So I wouldn't be surprised if it literally just cannot remember the details of the discussion even if technically it's within the allowable context.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1i097m","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;True, but small models also have a terrible time utilizing their large context:&lt;br/&gt;\\n&lt;a href=\\"https://contextarena.ai/?showExtra=true\\"&gt;https://contextarena.ai/?showExtra=true&lt;/a&gt;&lt;/p&gt;\\n\\n&lt;p&gt;After about 16k or 32k at most they break down hard. So I wouldn&amp;#39;t be surprised if it literally just cannot remember the details of the discussion even if technically it&amp;#39;s within the allowable context.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1i097m/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751736066,"author_flair_text":null,"treatment_tags":[],"created_utc":1751736066,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"richtext","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":"ed89e5c6-72f1-11ee-9954-1697022cd89d","likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"richtext","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":"ed89e5c6-72f1-11ee-9954-1697022cd89d","distinguished":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1i0gnx","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"YearZero","can_mod_post":false,"created_utc":1751736129,"send_replies":true,"parent_id":"t1_n1fl905","score":1,"author_fullname":"t2_4kpsn","approved_by":null,"mod_note":null,"all_awardings":[],"body":"Yeah it's the only model in that size range that actually has 32k context handling that is decent.","edited":false,"gildings":{},"author_flair_css_class":null,"name":"t1_n1i0gnx","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yeah it&amp;#39;s the only model in that size range that actually has 32k context handling that is decent.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"link_id":"t3_1ls1hd2","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1i0gnx/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751736129,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":7,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fl905","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Nepherpitu","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fe7z4","score":1,"author_fullname":"t2_plp1w","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Qwq performing insanely well for long context tasks. Downside is very long thinking.","edited":false,"gildings":{},"author_flair_css_class":null,"name":"t1_n1fl905","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Qwq performing insanely well for long context tasks. Downside is very long thinking.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"link_id":"t3_1ls1hd2","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fl905/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751698041,"author_flair_text":null,"treatment_tags":[],"created_utc":1751698041,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":6,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fe7z4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Blizado","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fbg7o","score":2,"author_fullname":"t2_j0e2r","approved_by":null,"mod_note":null,"all_awardings":[],"body":"And how should that help on a general LLM problem? I don't think reasoning alone will fix this issue. The problem is all models are no tested for long going RPs, only for short ones.","edited":false,"gildings":{},"downs":0,"author_flair_css_class":null,"name":"t1_n1fe7z4","is_submitter":true,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;And how should that help on a general LLM problem? I don&amp;#39;t think reasoning alone will fix this issue. The problem is all models are no tested for long going RPs, only for short ones.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"link_id":"t3_1ls1hd2","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fe7z4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751694078,"author_flair_text":null,"treatment_tags":[],"created_utc":1751694078,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":5,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fbg7o","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"TSG-AYAN","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fawc4","score":1,"author_fullname":"t2_5ml0rsi7","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"absolutely, what about giving qwq (not finetuned) a try? it looks like the best model in its class range on fiction livebench.","edited":false,"author_flair_css_class":null,"name":"t1_n1fbg7o","is_submitter":false,"downs":0,"author_flair_richtext":[{"e":"text","t":"llama.cpp"}],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;absolutely, what about giving qwq (not finetuned) a try? it looks like the best model in its class range on fiction livebench.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1ls1hd2","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":"light","treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fbg7o/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751692577,"author_flair_text":"llama.cpp","collapsed":false,"created_utc":1751692577,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":"#bbbdbf","collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fawc4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Blizado","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1f9dx1","score":4,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Finetunes have all one big problem: 99% of them are made for english and make every other language more worse than better.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fawc4","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Finetunes have all one big problem: 99% of them are made for english and make every other language more worse than better.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fawc4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751692282,"author_flair_text":null,"treatment_tags":[],"created_utc":1751692282,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":4}}],"before":null}},"user_reports":[],"saved":false,"id":"n1f9dx1","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"TSG-AYAN","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1f7ttx","score":0,"author_fullname":"t2_5ml0rsi7","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"What about trying a reasoning model RP finetune, like the arli ai models? also check what your context is at after it starts repeating, 1 hour of back and forth convo can be \\\\~10k easily.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1f9dx1","is_submitter":false,"collapsed":false,"author_flair_richtext":[{"e":"text","t":"llama.cpp"}],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;What about trying a reasoning model RP finetune, like the arli ai models? also check what your context is at after it starts repeating, 1 hour of back and forth convo can be ~10k easily.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":"light","score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1f9dx1/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751691478,"author_flair_text":"llama.cpp","treatment_tags":[],"created_utc":1751691478,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":"#bbbdbf","collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":0}}],"before":null}},"user_reports":[],"saved":false,"id":"n1f7ttx","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Blizado","can_mod_post":false,"created_utc":1751690673,"send_replies":true,"parent_id":"t1_n1f7ixk","score":6,"author_fullname":"t2_j0e2r","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Mistral 3.2 has a max. context window of 128k Token, I limited it to 10k, mostly 8k.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f7ttx","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Mistral 3.2 has a max. context window of 128k Token, I limited it to 10k, mostly 8k.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1f7ttx/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751690673,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":6}}],"before":null}},"user_reports":[],"saved":false,"id":"n1f7ixk","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"YearZero","can_mod_post":false,"created_utc":1751690518,"send_replies":true,"parent_id":"t3_1ls1hd2","score":1,"author_fullname":"t2_4kpsn","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Do you exceed the max context window of the LLM by any chance? That could be one possible reason anyway. You mentioned an hour - that is a long time for the small context windows of open source models. 32k fills up pretty quick in the course of an hour. If that happens the earlier context gets forgotten as the rolling window starts to go down.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f7ixk","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Do you exceed the max context window of the LLM by any chance? That could be one possible reason anyway. You mentioned an hour - that is a long time for the small context windows of open source models. 32k fills up pretty quick in the course of an hour. If that happens the earlier context gets forgotten as the rolling window starts to go down.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1f7ixk/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751690518,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fyxv6","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"stoppableDissolution","can_mod_post":false,"created_utc":1751706298,"send_replies":true,"parent_id":"t1_n1fq5wk","score":3,"author_fullname":"t2_1n0su21k4z","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Neither can deal with the model repeating same thing using synonyms.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fyxv6","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Neither can deal with the model repeating same thing using synonyms.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1ls1hd2","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fyxv6/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706298,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fq5wk","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"kataryna91","can_mod_post":false,"created_utc":1751700929,"send_replies":true,"parent_id":"t3_1ls1hd2","score":1,"author_fullname":"t2_tyn24pi9","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Most models run into this problem at some point, but it's a mostly solved problem with the DRY sampler.  \\nDRY (ideally combined with XTC) can turn even a bad model into a passable one.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fq5wk","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Most models run into this problem at some point, but it&amp;#39;s a mostly solved problem with the DRY sampler.&lt;br/&gt;\\nDRY (ideally combined with XTC) can turn even a bad model into a passable one.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1ls1hd2/will_this_ever_be_fixed_rp_repetition/n1fq5wk/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751700929,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1ls1hd2","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}}]`),n=()=>e.jsx(t,{data:l});export{n as default};
