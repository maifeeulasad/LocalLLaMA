import{j as e}from"./index-xfnGEtuL.js";import{R as t}from"./RedditPostRenderer-DAZRIZZK.js";import"./index-BaNn5-RR.js";const l=JSON.parse(`[{"kind":"Listing","data":{"after":null,"dist":1,"modhash":"","geo_filter":"","children":[{"kind":"t3","data":{"approved_at_utc":null,"subreddit":"LocalLLaMA","selftext":"I use LLMs for semantic text chunking. Models in the range of 24 to 32B, quantized between Q4 and Q6, give me the most robust results. Mistral-Small-3.2, Gemma-27B and Qwen3-32B all work well, Mistral and Gemma seem to be a bit better with certain non-English languages.\\n\\nWhen I go lower, results are still ok with Qwen3-14B, but below that reconstruction errors go up quickly.\\n\\nSince the process is rather token-intensive and slow (reproducing the entire text in chunked form), I'm considering a fine-tune of a smallish LLM. I'd be happy to hear some tips from people who are doing similar stuff, like other models to consider or tweaks to make the output more robust.","user_reports":[],"saved":false,"mod_reason_title":null,"gilded":0,"clicked":false,"title":"Semantic chunking using LLMs","link_flair_richtext":[{"e":"text","t":"Question | Help"}],"subreddit_name_prefixed":"r/LocalLLaMA","hidden":false,"pwls":6,"link_flair_css_class":"","downs":0,"thumbnail_height":null,"top_awarded_type":null,"hide_score":false,"name":"t3_1m4lxak","quarantine":false,"link_flair_text_color":"dark","upvote_ratio":0.96,"author_flair_background_color":null,"subreddit_type":"public","ups":21,"total_awards_received":0,"media_embed":{},"thumbnail_width":null,"author_flair_template_id":null,"is_original_content":false,"author_fullname":"t2_19icy5o1t9","secure_media":null,"is_reddit_media_domain":false,"is_meta":false,"category":null,"secure_media_embed":{},"link_flair_text":"Question | Help","can_mod_post":false,"score":21,"approved_by":null,"is_created_from_ads_ui":false,"author_premium":false,"thumbnail":"self","edited":false,"author_flair_css_class":null,"author_flair_richtext":[],"gildings":{},"content_categories":null,"is_self":true,"mod_note":null,"created":1753008337,"link_flair_type":"richtext","wls":6,"removed_by_category":null,"banned_by":null,"author_flair_type":"text","domain":"self.LocalLLaMA","allow_live_comments":false,"selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\\"md\\"&gt;&lt;p&gt;I use LLMs for semantic text chunking. Models in the range of 24 to 32B, quantized between Q4 and Q6, give me the most robust results. Mistral-Small-3.2, Gemma-27B and Qwen3-32B all work well, Mistral and Gemma seem to be a bit better with certain non-English languages.&lt;/p&gt;\\n\\n&lt;p&gt;When I go lower, results are still ok with Qwen3-14B, but below that reconstruction errors go up quickly.&lt;/p&gt;\\n\\n&lt;p&gt;Since the process is rather token-intensive and slow (reproducing the entire text in chunked form), I&amp;#39;m considering a fine-tune of a smallish LLM. I&amp;#39;d be happy to hear some tips from people who are doing similar stuff, like other models to consider or tweaks to make the output more robust.&lt;/p&gt;\\n&lt;/div&gt;&lt;!-- SC_ON --&gt;","likes":null,"suggested_sort":null,"banned_at_utc":null,"view_count":null,"archived":false,"no_follow":false,"is_crosspostable":false,"pinned":false,"over_18":false,"all_awardings":[],"awarders":[],"media_only":false,"link_flair_template_id":"2c9831e6-bf92-11ed-98e6-d2b8bcc02ae1","can_gild":false,"spoiler":false,"locked":false,"author_flair_text":null,"treatment_tags":[],"visited":false,"removed_by":null,"num_reports":null,"distinguished":null,"subreddit_id":"t5_81eyvm","author_is_blocked":false,"mod_reason_by":null,"removal_reason":null,"link_flair_background_color":"#5a74cc","id":"1m4lxak","is_robot_indexable":true,"num_duplicates":0,"report_reasons":null,"author":"mnze_brngo_7325","discussion_type":null,"num_comments":20,"send_replies":true,"media":null,"contest_mode":false,"author_patreon_flair":false,"author_flair_text_color":null,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/","stickied":false,"url":"https://www.reddit.com/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/","subreddit_subscribers":502274,"created_utc":1753008337,"num_crossposts":0,"mod_reports":[],"is_video":false}}],"before":null}},{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n45jhu4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"created_utc":1753013459,"send_replies":true,"parent_id":"t1_n45g0ii","score":3,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I tried this, without much luck. All models tend to hallucinate line numbers or the choice of split points is much worse, resulting in poor chunks. Also tried to have it output the content of the line at which to split. Similarly poor results, and obviously can lead to ambiguous results depending on the text.\\n\\nWhich model did you use for that and how big was the input text?\\n\\nUPDATE: misread that you wrote paragraph instead of line. That could actually be more reliable than prefixing each line as I did. I occasionally have the situation where I split a really big paragraph. But such cases could easily be dealt with in a second run. Will try that.","edited":1753014702,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45jhu4","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I tried this, without much luck. All models tend to hallucinate line numbers or the choice of split points is much worse, resulting in poor chunks. Also tried to have it output the content of the line at which to split. Similarly poor results, and obviously can lead to ambiguous results depending on the text.&lt;/p&gt;\\n\\n&lt;p&gt;Which model did you use for that and how big was the input text?&lt;/p&gt;\\n\\n&lt;p&gt;UPDATE: misread that you wrote paragraph instead of line. That could actually be more reliable than prefixing each line as I did. I occasionally have the situation where I split a really big paragraph. But such cases could easily be dealt with in a second run. Will try that.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45jhu4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753013459,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n45upbr","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"send_replies":true,"parent_id":"t1_n45qeu2","score":1,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"That is my understanding. You modify the input text by prefixing paragraphs (or lines) with numbers. I could also imagine to use a random alphanumeric ID instead. For knowledge graph extraction I had good results with generating a UUID of which I kept just the first 6 or so characters.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n45upbr","is_submitter":true,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;That is my understanding. You modify the input text by prefixing paragraphs (or lines) with numbers. I could also imagine to use a random alphanumeric ID instead. For knowledge graph extraction I had good results with generating a UUID of which I kept just the first 6 or so characters.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45upbr/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753017879,"author_flair_text":null,"treatment_tags":[],"created_utc":1753017879,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n45qeu2","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mindful_maven_25","can_mod_post":false,"created_utc":1753016268,"send_replies":true,"parent_id":"t1_n45g0ii","score":1,"author_fullname":"t2_1syhds3w2f","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I was not able to follow this completely. Suggestion here is to make the LLM predict the line number of the paragraph which it considers as the boundary of the chunk? And assumes that input paragraphs are line numbered?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45qeu2","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I was not able to follow this completely. Suggestion here is to make the LLM predict the line number of the paragraph which it considers as the boundary of the chunk? And assumes that input paragraphs are line numbered?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45qeu2/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753016268,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n45g0ii","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Chromix_","can_mod_post":false,"created_utc":1753011892,"send_replies":true,"parent_id":"t3_1m4lxak","score":5,"author_fullname":"t2_k7w2h","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Prefix each paragraph in the input data with consecutive numbers. Let the LLM only output the numbers of the chunks that belong together. Results in super-fast generation and no hallucination errors in the text.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45g0ii","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Prefix each paragraph in the input data with consecutive numbers. Let the LLM only output the numbers of the chunks that belong together. Results in super-fast generation and no hallucination errors in the text.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45g0ii/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753011892,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":5}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n45ketu","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"created_utc":1753013849,"send_replies":true,"parent_id":"t1_n45i8pe","score":1,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Yes, that matches my experience. The regex idea is indeed interesting. I tried to output the lines at which to split verbatim and this didn't work well at all. I'd expect regex to suffer from a similar problem.\\n\\nI start by doing a static split based on markdown headers and I keep the input at 1 - 2k tokens. That tends to work well.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45ketu","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yes, that matches my experience. The regex idea is indeed interesting. I tried to output the lines at which to split verbatim and this didn&amp;#39;t work well at all. I&amp;#39;d expect regex to suffer from a similar problem.&lt;/p&gt;\\n\\n&lt;p&gt;I start by doing a static split based on markdown headers and I keep the input at 1 - 2k tokens. That tends to work well.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45ketu/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753013849,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n45oaf7","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"created_utc":1753015444,"send_replies":true,"parent_id":"t1_n45i8pe","score":1,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"As for chunk sizes and sota embeddings, I guess you are right, but I need chunking optimized for embeddings that run reasonably fast on low resource devices (CPU). So I'm basically limited in my choice of models. Also I find well-focused chunks help maintain a good signal-noise ratio, though chunks for embedding and chunks that go in the LLM context are not necessarily the same.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45oaf7","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;As for chunk sizes and sota embeddings, I guess you are right, but I need chunking optimized for embeddings that run reasonably fast on low resource devices (CPU). So I&amp;#39;m basically limited in my choice of models. Also I find well-focused chunks help maintain a good signal-noise ratio, though chunks for embedding and chunks that go in the LLM context are not necessarily the same.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45oaf7/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753015444,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n45i8pe","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"lly0571","can_mod_post":false,"created_utc":1753012911,"send_replies":true,"parent_id":"t3_1m4lxak","score":6,"author_fullname":"t2_70vzcleel","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Here are my previous chunking test results on some **Chinese** news texts:\\n\\n- Qwen3-14B-AWQ (✅)\\n- Qwen2.5-14B-AWQ (☑️, Successful most of the time)\\n- Qwen3-32B-AWQ (✅)\\n- Qwen3-30B-A3B-q6 (☑️, Acceptable but noticeably worse than 14B)\\n- Qwen3-8B-q4 (☑️, Fails occasionally)\\n- Qwen3-4B (❌)\\n- GLM4-0414-9B-q8 (☑️, Successful most of the time, better than Minicpm)\\n- Minicpm4-8B-marlin-vllm (❌)\\n- Gemma3-4b-it-qat-q4 (❌)\\n- Gemma3-12b-it-qat-q4 (❌)\\n- Gemma3-27b-it-qat-q4 (☑️)\\n- mistral-small-3.2-22b-q4 (☑️, Worse than Gemma3-27b)\\n- Llama4-Scout (API, ✅)\\n(✅ = Reliable performance, ☑️ = Functional but not stable, ❌ = Unusable)\\n\\nI think Qwen3 performs relatively well among open-source models (though models like 30B-A3B and smaller are unreliable, and 14B being barely usable). GLM4 shows a similar pattern to Qwen3. Gemma3 underperforms Qwen in Chinese tasks, but may perform better in English?\\n\\nFor this text chunking task with SFT, I think generating a regex to represent chunking positions would be more effective. Directly outputting offset positions is unreliable, and full-text chunking is slow. But you need to organize your data first.\\n\\nAdditionally, current state-of-the-art text embeddings appear less sensitive to chunking requirements. For example, LLM-based embeddings like Qwen3-Embedding support 32K context length, making them usable for 2-4K text segments at least. Maybe chunking is not that necessary nowadays.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45i8pe","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Here are my previous chunking test results on some &lt;strong&gt;Chinese&lt;/strong&gt; news texts:&lt;/p&gt;\\n\\n&lt;ul&gt;\\n&lt;li&gt;Qwen3-14B-AWQ (✅)&lt;/li&gt;\\n&lt;li&gt;Qwen2.5-14B-AWQ (☑️, Successful most of the time)&lt;/li&gt;\\n&lt;li&gt;Qwen3-32B-AWQ (✅)&lt;/li&gt;\\n&lt;li&gt;Qwen3-30B-A3B-q6 (☑️, Acceptable but noticeably worse than 14B)&lt;/li&gt;\\n&lt;li&gt;Qwen3-8B-q4 (☑️, Fails occasionally)&lt;/li&gt;\\n&lt;li&gt;Qwen3-4B (❌)&lt;/li&gt;\\n&lt;li&gt;GLM4-0414-9B-q8 (☑️, Successful most of the time, better than Minicpm)&lt;/li&gt;\\n&lt;li&gt;Minicpm4-8B-marlin-vllm (❌)&lt;/li&gt;\\n&lt;li&gt;Gemma3-4b-it-qat-q4 (❌)&lt;/li&gt;\\n&lt;li&gt;Gemma3-12b-it-qat-q4 (❌)&lt;/li&gt;\\n&lt;li&gt;Gemma3-27b-it-qat-q4 (☑️)&lt;/li&gt;\\n&lt;li&gt;mistral-small-3.2-22b-q4 (☑️, Worse than Gemma3-27b)&lt;/li&gt;\\n&lt;li&gt;Llama4-Scout (API, ✅)\\n(✅ = Reliable performance, ☑️ = Functional but not stable, ❌ = Unusable)&lt;/li&gt;\\n&lt;/ul&gt;\\n\\n&lt;p&gt;I think Qwen3 performs relatively well among open-source models (though models like 30B-A3B and smaller are unreliable, and 14B being barely usable). GLM4 shows a similar pattern to Qwen3. Gemma3 underperforms Qwen in Chinese tasks, but may perform better in English?&lt;/p&gt;\\n\\n&lt;p&gt;For this text chunking task with SFT, I think generating a regex to represent chunking positions would be more effective. Directly outputting offset positions is unreliable, and full-text chunking is slow. But you need to organize your data first.&lt;/p&gt;\\n\\n&lt;p&gt;Additionally, current state-of-the-art text embeddings appear less sensitive to chunking requirements. For example, LLM-based embeddings like Qwen3-Embedding support 32K context length, making them usable for 2-4K text segments at least. Maybe chunking is not that necessary nowadays.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45i8pe/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753012911,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":6}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n477b10","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Traditional-Gap-3313","can_mod_post":false,"created_utc":1753033140,"send_replies":true,"parent_id":"t3_1m4lxak","score":3,"author_fullname":"t2_1g8b3m94rt","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"I used stanza for sentence splitting and then Langchain implementation of the semantic chunker and got pretty good results. What are the advantages of splitting with LLMs? Did you get superior results? Is it worth the effort?\\n\\nI had 400k documents resulting in \\\\~5 million chunks, it took 2x3090s for 3 days. Can even imaging how long would it take the model to spit out all that text.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n477b10","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I used stanza for sentence splitting and then Langchain implementation of the semantic chunker and got pretty good results. What are the advantages of splitting with LLMs? Did you get superior results? Is it worth the effort?&lt;/p&gt;\\n\\n&lt;p&gt;I had 400k documents resulting in ~5 million chunks, it took 2x3090s for 3 days. Can even imaging how long would it take the model to spit out all that text.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n477b10/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753033140,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n479oze","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"phree_radical","can_mod_post":false,"created_utc":1753033831,"send_replies":true,"parent_id":"t3_1m4lxak","score":2,"author_fullname":"t2_44nkp","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Split into chunks beforehand, then, in pairs, determine whether chunk B changed the subject relative to chunk A","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n479oze","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Split into chunks beforehand, then, in pairs, determine whether chunk B changed the subject relative to chunk A&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n479oze/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753033831,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n470cyw","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"send_replies":true,"parent_id":"t1_n46dlxc","score":1,"author_fullname":"t2_19icy5o1t9","approved_by":null,"mod_note":null,"all_awardings":[],"body":"I can't give you definite answers to your questions about my pipeline because I don't have that one strategy or preferred set of tools or models.\\n\\nLLM-as-a-judge is generally unreliable and can be a pain in the ass. What I find helps is keeping the range of values low, 1 to 5 works better than 1 to 10, but 0 to 1.0 works ok, too, sometimes. And tell it what the numbers mean (1 = useless noise, 2 = non-topical metadata, ... ,5 = highly topical, dense information). Few shot examples can improve things, but might also cause overfitting depending on the data distribution or the model.\\n\\nI recommend you get the model to accompany a score with qualitative judgement (worded form) or tell the model to write concrete and compelling evidence that would support its score. Reasoning models might not need that much nudging.\\n\\nI use re-ranking occasionally, but in constrained environments (CPU) it often is too slow. Well maintained data for embedding and LLM context (hand-crafted if I can afford it) gives me the most leverage usually.\\n\\nSince you are into finetuning, you might want to look into tuning an embedding model to your domain (nice overview: https://www.youtube.com/watch?v=v28Pu7hsJ0s).","edited":false,"gildings":{},"downs":0,"author_flair_css_class":null,"name":"t1_n470cyw","is_submitter":true,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I can&amp;#39;t give you definite answers to your questions about my pipeline because I don&amp;#39;t have that one strategy or preferred set of tools or models.&lt;/p&gt;\\n\\n&lt;p&gt;LLM-as-a-judge is generally unreliable and can be a pain in the ass. What I find helps is keeping the range of values low, 1 to 5 works better than 1 to 10, but 0 to 1.0 works ok, too, sometimes. And tell it what the numbers mean (1 = useless noise, 2 = non-topical metadata, ... ,5 = highly topical, dense information). Few shot examples can improve things, but might also cause overfitting depending on the data distribution or the model.&lt;/p&gt;\\n\\n&lt;p&gt;I recommend you get the model to accompany a score with qualitative judgement (worded form) or tell the model to write concrete and compelling evidence that would support its score. Reasoning models might not need that much nudging.&lt;/p&gt;\\n\\n&lt;p&gt;I use re-ranking occasionally, but in constrained environments (CPU) it often is too slow. Well maintained data for embedding and LLM context (hand-crafted if I can afford it) gives me the most leverage usually.&lt;/p&gt;\\n\\n&lt;p&gt;Since you are into finetuning, you might want to look into tuning an embedding model to your domain (nice overview: &lt;a href=\\"https://www.youtube.com/watch?v=v28Pu7hsJ0s\\"&gt;https://www.youtube.com/watch?v=v28Pu7hsJ0s&lt;/a&gt;).&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"link_id":"t3_1m4lxak","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n470cyw/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753031111,"author_flair_text":null,"treatment_tags":[],"created_utc":1753031111,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":5,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n46dlxc","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Affectionate-Cap-600","can_mod_post":false,"send_replies":true,"parent_id":"t1_n45tbyk","score":1,"author_fullname":"t2_5oltmr5b","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"oh ok thank for the explanation! \\n\\nwhen I worked on my rag pipeline I tried to 'generalize' this process fine tuning a classifier... at the time I used as base model the classifier used to create fineweb-edu dataset (that, if I recall correctly, is based on artic-embedder-l + a linear layer as classification head). I ended up with a model that was somehow useful but that was incredibly biased to \\"topics\\". ie, if a chunk of text was about a domain that is considered 'specific' or 'techinal' (ie, medicine) it would score it high even if the content was useless. probably that was related to the low quality of my trainingset.\\nI'm interested, what is your experience with the 'llm as a judge' approach here? I didn't go that way because I didn't had the compute required to du that on larger corpus, but I think that a small modern llm if fine tuned could work really well.\\n\\nAlso, what models are you using as embedded? do you use hybrid search and/or a reranker? \\n\\nsorry for those questions but I'm really interested in that, if you don't mind, could you explain me your complete pipeline?\\n\\nI paused the development of my custom retrieval pipeline as I was too busy with my university studies, I'm starting again but right now I'm just creating synthetic data to tune an embedder. \\nI'm on the road of 200k anchor/positibe/negative pairs but this is taking a while. (every item has multiple declinatons like summary of the positive, various kinds of rephrasings and hard negatives, keywords, translations etch...) \\n\\nI admit that I'm abusing the free quotas of openrouter, 1k/day, with multiple keys to use deepseek R1 for that. I also use nemotron-ultra-253B dense and chimera-t2r2 (the merge of V3 and R1)... also gemini-flash is giving good results for multilingual. \\n\\nI hope that those data combined with a custom architecture for the pooler (with learnable parameters) will results in a strong base models. (I'll probably try to take a path similar to the concept outlined in the 'INSTRUCTOR' paper but with different purposes)\\n\\nany kind of info/advice or experience would be appreciated, or if you want to discuss something related","edited":false,"author_flair_css_class":null,"name":"t1_n46dlxc","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;oh ok thank for the explanation! &lt;/p&gt;\\n\\n&lt;p&gt;when I worked on my rag pipeline I tried to &amp;#39;generalize&amp;#39; this process fine tuning a classifier... at the time I used as base model the classifier used to create fineweb-edu dataset (that, if I recall correctly, is based on artic-embedder-l + a linear layer as classification head). I ended up with a model that was somehow useful but that was incredibly biased to &amp;quot;topics&amp;quot;. ie, if a chunk of text was about a domain that is considered &amp;#39;specific&amp;#39; or &amp;#39;techinal&amp;#39; (ie, medicine) it would score it high even if the content was useless. probably that was related to the low quality of my trainingset.\\nI&amp;#39;m interested, what is your experience with the &amp;#39;llm as a judge&amp;#39; approach here? I didn&amp;#39;t go that way because I didn&amp;#39;t had the compute required to du that on larger corpus, but I think that a small modern llm if fine tuned could work really well.&lt;/p&gt;\\n\\n&lt;p&gt;Also, what models are you using as embedded? do you use hybrid search and/or a reranker? &lt;/p&gt;\\n\\n&lt;p&gt;sorry for those questions but I&amp;#39;m really interested in that, if you don&amp;#39;t mind, could you explain me your complete pipeline?&lt;/p&gt;\\n\\n&lt;p&gt;I paused the development of my custom retrieval pipeline as I was too busy with my university studies, I&amp;#39;m starting again but right now I&amp;#39;m just creating synthetic data to tune an embedder. \\nI&amp;#39;m on the road of 200k anchor/positibe/negative pairs but this is taking a while. (every item has multiple declinatons like summary of the positive, various kinds of rephrasings and hard negatives, keywords, translations etch...) &lt;/p&gt;\\n\\n&lt;p&gt;I admit that I&amp;#39;m abusing the free quotas of openrouter, 1k/day, with multiple keys to use deepseek R1 for that. I also use nemotron-ultra-253B dense and chimera-t2r2 (the merge of V3 and R1)... also gemini-flash is giving good results for multilingual. &lt;/p&gt;\\n\\n&lt;p&gt;I hope that those data combined with a custom architecture for the pooler (with learnable parameters) will results in a strong base models. (I&amp;#39;ll probably try to take a path similar to the concept outlined in the &amp;#39;INSTRUCTOR&amp;#39; paper but with different purposes)&lt;/p&gt;\\n\\n&lt;p&gt;any kind of info/advice or experience would be appreciated, or if you want to discuss something related&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1m4lxak","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n46dlxc/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753024225,"author_flair_text":null,"collapsed":false,"created_utc":1753024225,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n45tbyk","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"send_replies":true,"parent_id":"t1_n45shgw","score":3,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"I classify each chunk by type (e.g. abstract, toc, bibliography, methodology etc.). For example, when I process papers, bibliography, toc are usually not or not that important, and I weed them out. Then I use llm-as-a-judge (with all its unreliability) to give each chunk a relevance score, meaning how much information value does it have in general and in relation to the overall topic of the document.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45tbyk","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I classify each chunk by type (e.g. abstract, toc, bibliography, methodology etc.). For example, when I process papers, bibliography, toc are usually not or not that important, and I weed them out. Then I use llm-as-a-judge (with all its unreliability) to give each chunk a relevance score, meaning how much information value does it have in general and in relation to the overall topic of the document.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45tbyk/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753017371,"author_flair_text":null,"treatment_tags":[],"created_utc":1753017371,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n45shgw","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Affectionate-Cap-600","can_mod_post":false,"send_replies":true,"parent_id":"t1_n45r11j","score":1,"author_fullname":"t2_5oltmr5b","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"what do you mean here with relevance score?","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n45shgw","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;what do you mean here with relevance score?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45shgw/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753017056,"author_flair_text":null,"treatment_tags":[],"created_utc":1753017056,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n45r11j","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"created_utc":1753016506,"send_replies":true,"parent_id":"t1_n45oy31","score":3,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Yes that is exactly what happens with lower parameter models. Above 20B it's mostly no issue.\\n\\nI test it by reconstructing the text from the chunk and simply string-compare. For each chunk you can do a simple \\\\\`chunk in original\\\\_text\\\\\` test. I also calculate Levenshtein distance. With that I can set a threshold at where I decide if the error is acceptable or not. Since I run a relevance score across all chunks, I can take this into account, too (error in low-relevance chunk is less critical etc.).\\n\\nYou can run a retry when the error score is too high, but I find that the models tend to repeat the same error. Haven't tried it here, but with other agentic tasks a specific error description given to the model on a retry attempt can fix the tendency to repeat the error.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45r11j","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yes that is exactly what happens with lower parameter models. Above 20B it&amp;#39;s mostly no issue.&lt;/p&gt;\\n\\n&lt;p&gt;I test it by reconstructing the text from the chunk and simply string-compare. For each chunk you can do a simple \`chunk in original_text\` test. I also calculate Levenshtein distance. With that I can set a threshold at where I decide if the error is acceptable or not. Since I run a relevance score across all chunks, I can take this into account, too (error in low-relevance chunk is less critical etc.).&lt;/p&gt;\\n\\n&lt;p&gt;You can run a retry when the error score is too high, but I find that the models tend to repeat the same error. Haven&amp;#39;t tried it here, but with other agentic tasks a specific error description given to the model on a retry attempt can fix the tendency to repeat the error.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45r11j/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753016506,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n45oy31","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Affectionate-Cap-600","can_mod_post":false,"created_utc":1753015701,"send_replies":true,"parent_id":"t3_1m4lxak","score":1,"author_fullname":"t2_5oltmr5b","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"does the model change the text sometimes? that was the main drawback when I tested it, still I did that 6months ago so different models...\\n\\nI ended up having to write some crazy regex to understand compare the model output and original text to fix 'errors'","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45oy31","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;does the model change the text sometimes? that was the main drawback when I tested it, still I did that 6months ago so different models...&lt;/p&gt;\\n\\n&lt;p&gt;I ended up having to write some crazy regex to understand compare the model output and original text to fix &amp;#39;errors&amp;#39;&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45oy31/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753015701,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n45vnmv","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mnze_brngo_7325","can_mod_post":false,"created_utc":1753018228,"send_replies":true,"parent_id":"t1_n45tur4","score":1,"author_fullname":"t2_19icy5o1t9","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"No, I'm using an LLM (chat model) to preprocess text for, among other things, downstream embedding.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45vnmv","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;No, I&amp;#39;m using an LLM (chat model) to preprocess text for, among other things, downstream embedding.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1m4lxak","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45vnmv/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753018228,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n45tur4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Porespellar","can_mod_post":false,"created_utc":1753017565,"send_replies":true,"parent_id":"t3_1m4lxak","score":1,"author_fullname":"t2_y35oj","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Forgive my ignorance, so you’re using chat models as embedding models? I’ve just always used Nomic-embed or Mixed Bread or something like that. What are the advantages of using chat models vs. models that were built specifically for the task?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45tur4","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Forgive my ignorance, so you’re using chat models as embedding models? I’ve just always used Nomic-embed or Mixed Bread or something like that. What are the advantages of using chat models vs. models that were built specifically for the task?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45tur4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753017565,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"richtext","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":"ed89e5c6-72f1-11ee-9954-1697022cd89d","likes":null,"replies":"","user_reports":[],"saved":false,"id":"n48sil4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"No_Afternoon_4260","can_mod_post":false,"created_utc":1753051129,"send_replies":true,"parent_id":"t3_1m4lxak","score":1,"author_fullname":"t2_cj9kap4bx","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Not a fine tune of a smaller model, a fine tune of a model that gives you the coordinate of the chunks ;)  \\nDon't use a smaller models, make it talk less but its words should carry more value","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n48sil4","is_submitter":false,"downs":0,"author_flair_richtext":[{"e":"text","t":"llama.cpp"}],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Not a fine tune of a smaller model, a fine tune of a model that gives you the coordinate of the chunks ;)&lt;br/&gt;\\nDon&amp;#39;t use a smaller models, make it talk less but its words should carry more value&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":"light","score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n48sil4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753051129,"author_flair_text":"llama.cpp","treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":"#bbbdbf","collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"richtext","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":"1c60b73a-72f2-11ee-bdcc-8e2a7b94d6a0","likes":null,"replies":"","user_reports":[],"saved":false,"id":"n4bjl92","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"LMLocalizer","can_mod_post":false,"created_utc":1753095742,"send_replies":true,"parent_id":"t3_1m4lxak","score":1,"author_fullname":"t2_odpk5u3wr","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Be sure to check out https://github.com/mirth/chonky","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n4bjl92","is_submitter":false,"downs":0,"author_flair_richtext":[{"e":"text","t":"textgen web UI"}],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Be sure to check out &lt;a href=\\"https://github.com/mirth/chonky\\"&gt;https://github.com/mirth/chonky&lt;/a&gt;&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":"light","score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n4bjl92/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753095742,"author_flair_text":"textgen web UI","treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":"#bbbdbf","collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n45n2wh","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"absolooot1","can_mod_post":false,"created_utc":1753014960,"send_replies":true,"parent_id":"t3_1m4lxak","score":1,"author_fullname":"t2_1pr7hwh6t5","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Have you tried Llama 3.1 8B?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n45n2wh","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Have you tried Llama 3.1 8B?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m4lxak/semantic_chunking_using_llms/n45n2wh/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1753014960,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m4lxak","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}}]`),r=()=>e.jsx(t,{data:l});export{r as default};
