import{j as e}from"./index-BesAfWr7.js";import{R as t}from"./RedditPostRenderer-BdTjz6Pg.js";import"./index-fSlfMVR-.js";const a=JSON.parse(`[{"kind":"Listing","data":{"after":null,"dist":1,"modhash":"","geo_filter":"","children":[{"kind":"t3","data":{"approved_at_utc":null,"subreddit":"LocalLLaMA","selftext":"Hey all. I'm new to this world, I haven't done anything directly with Ollama myself before. I do extensively use Home Assistant around my house. With their recent release of \\"Home Assistant Voice (Preview)\\" I'm interested in getting a voice assistant that's fully local. To further bad-ass-ify it (real word, promise) I want to offload the command processing to a local LLM. I've got a smattering of GPUs laying around, but I don't know enough to know for sure if re-using the hardware I've got is really going to work. So I think my questions boil down to:\\n\\n1. Does multi-GPU help in a situation where the build's only purpose would be to run a single LLM? Can the model be split across the vram of the different GPUs?\\n2. If the answer to #1 is \\"yes\\", is there going to be any significant performance penalty for inference with the model split between GPUs?\\n3. These were used for mining in their previous life, so the board and setup I have for them has them all connected via PCIE 1x risers. What kind of bandwidth does inference require, do the risers with PCIE 1x become a bottleneck that will kill my dream?\\n4. If the answers to #1-3 are all positive, what's my limit here? The rig these came out of had all 6 cards on one board. Is there going to be a plateau or a point where more cards is actually hurting rather than helping?\\n\\nI guess my *worst case* is that I can use the 12G card and run a smaller model, but I'd like to know how much I could possible squeeze out of the hardware as it's not doing anything else right now anyway. I don't even know, maybe that's overkill for an LLM that's just meant to process my home automation commands?\\n\\n  \\n**Edit**:\\n\\nThe other details, the board I have laying around is an MSI Z390-A Pro. It has 2 PCIEx16 slots (Gen3), and 4 PCIEx1 slots. So if bus speed is an issue, my worst case might be the 2 3080's both in full x16 slots on the board?\\n\\nhttps://preview.redd.it/xi1xzz2n8j9f1.jpg?width=3000&amp;format=pjpg&amp;auto=webp&amp;s=35a3594b4c7991717e1f2eb7aea847f8e61ba2c1","user_reports":[],"saved":false,"mod_reason_title":null,"gilded":0,"clicked":false,"title":"Build advice question for repurposing spare GPUs","link_flair_richtext":[{"e":"text","t":"Question | Help"}],"subreddit_name_prefixed":"r/LocalLLaMA","hidden":false,"pwls":6,"link_flair_css_class":"","downs":0,"thumbnail_height":140,"top_awarded_type":null,"hide_score":false,"media_metadata":{"xi1xzz2n8j9f1":{"status":"valid","e":"Image","m":"image/jpg","p":[{"y":144,"x":108,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=108&amp;crop=smart&amp;auto=webp&amp;s=84aa723d606e228669c1da699962782001224c31"},{"y":288,"x":216,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=216&amp;crop=smart&amp;auto=webp&amp;s=fafdc67fc64c32c72d82b26520cd838d8a701d29"},{"y":426,"x":320,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=320&amp;crop=smart&amp;auto=webp&amp;s=ec1bf77c505e8414ce32a748beac9609739c235f"},{"y":853,"x":640,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=640&amp;crop=smart&amp;auto=webp&amp;s=8cdd6ea1c9e7a03f8859377a2e935373740778c4"},{"y":1280,"x":960,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=960&amp;crop=smart&amp;auto=webp&amp;s=a66dabdfe5328921fcac58a30ccfd14ee5dd7fc8"},{"y":1440,"x":1080,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=1080&amp;crop=smart&amp;auto=webp&amp;s=9be0caf09d8a750f8e2448b39123909e9f2ecd3b"}],"s":{"y":4000,"x":3000,"u":"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=3000&amp;format=pjpg&amp;auto=webp&amp;s=35a3594b4c7991717e1f2eb7aea847f8e61ba2c1"},"id":"xi1xzz2n8j9f1"}},"name":"t3_1lm4tno","quarantine":false,"link_flair_text_color":"dark","upvote_ratio":0.83,"author_flair_background_color":null,"subreddit_type":"public","ups":4,"total_awards_received":0,"media_embed":{},"thumbnail_width":140,"author_flair_template_id":null,"is_original_content":false,"author_fullname":"t2_i8pga","secure_media":null,"is_reddit_media_domain":false,"is_meta":false,"category":null,"secure_media_embed":{},"link_flair_text":"Question | Help","can_mod_post":false,"score":4,"approved_by":null,"is_created_from_ads_ui":false,"author_premium":false,"thumbnail":"https://b.thumbs.redditmedia.com/khTvjjkLoV7aKKjXw-o5B-xbSd-DhTjUUvpvLRkN9yQ.jpg","edited":1751058025,"author_flair_css_class":null,"author_flair_richtext":[],"gildings":{},"content_categories":null,"is_self":true,"mod_note":null,"created":1751057588,"link_flair_type":"richtext","wls":6,"removed_by_category":null,"banned_by":null,"author_flair_type":"text","domain":"self.LocalLLaMA","allow_live_comments":false,"selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\\"md\\"&gt;&lt;p&gt;Hey all. I&amp;#39;m new to this world, I haven&amp;#39;t done anything directly with Ollama myself before. I do extensively use Home Assistant around my house. With their recent release of &amp;quot;Home Assistant Voice (Preview)&amp;quot; I&amp;#39;m interested in getting a voice assistant that&amp;#39;s fully local. To further bad-ass-ify it (real word, promise) I want to offload the command processing to a local LLM. I&amp;#39;ve got a smattering of GPUs laying around, but I don&amp;#39;t know enough to know for sure if re-using the hardware I&amp;#39;ve got is really going to work. So I think my questions boil down to:&lt;/p&gt;\\n\\n&lt;ol&gt;\\n&lt;li&gt;Does multi-GPU help in a situation where the build&amp;#39;s only purpose would be to run a single LLM? Can the model be split across the vram of the different GPUs?&lt;/li&gt;\\n&lt;li&gt;If the answer to #1 is &amp;quot;yes&amp;quot;, is there going to be any significant performance penalty for inference with the model split between GPUs?&lt;/li&gt;\\n&lt;li&gt;These were used for mining in their previous life, so the board and setup I have for them has them all connected via PCIE 1x risers. What kind of bandwidth does inference require, do the risers with PCIE 1x become a bottleneck that will kill my dream?&lt;/li&gt;\\n&lt;li&gt;If the answers to #1-3 are all positive, what&amp;#39;s my limit here? The rig these came out of had all 6 cards on one board. Is there going to be a plateau or a point where more cards is actually hurting rather than helping?&lt;/li&gt;\\n&lt;/ol&gt;\\n\\n&lt;p&gt;I guess my &lt;em&gt;worst case&lt;/em&gt; is that I can use the 12G card and run a smaller model, but I&amp;#39;d like to know how much I could possible squeeze out of the hardware as it&amp;#39;s not doing anything else right now anyway. I don&amp;#39;t even know, maybe that&amp;#39;s overkill for an LLM that&amp;#39;s just meant to process my home automation commands?&lt;/p&gt;\\n\\n&lt;p&gt;&lt;strong&gt;Edit&lt;/strong&gt;:&lt;/p&gt;\\n\\n&lt;p&gt;The other details, the board I have laying around is an MSI Z390-A Pro. It has 2 PCIEx16 slots (Gen3), and 4 PCIEx1 slots. So if bus speed is an issue, my worst case might be the 2 3080&amp;#39;s both in full x16 slots on the board?&lt;/p&gt;\\n\\n&lt;p&gt;&lt;a href=\\"https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=3000&amp;amp;format=pjpg&amp;amp;auto=webp&amp;amp;s=35a3594b4c7991717e1f2eb7aea847f8e61ba2c1\\"&gt;https://preview.redd.it/xi1xzz2n8j9f1.jpg?width=3000&amp;amp;format=pjpg&amp;amp;auto=webp&amp;amp;s=35a3594b4c7991717e1f2eb7aea847f8e61ba2c1&lt;/a&gt;&lt;/p&gt;\\n&lt;/div&gt;&lt;!-- SC_ON --&gt;","likes":null,"suggested_sort":null,"banned_at_utc":null,"view_count":null,"archived":false,"no_follow":false,"is_crosspostable":false,"pinned":false,"over_18":false,"all_awardings":[],"awarders":[],"media_only":false,"link_flair_template_id":"2c9831e6-bf92-11ed-98e6-d2b8bcc02ae1","can_gild":false,"spoiler":false,"locked":false,"author_flair_text":null,"treatment_tags":[],"visited":false,"removed_by":null,"num_reports":null,"distinguished":null,"subreddit_id":"t5_81eyvm","author_is_blocked":false,"mod_reason_by":null,"removal_reason":null,"link_flair_background_color":"#5a74cc","id":"1lm4tno","is_robot_indexable":true,"num_duplicates":0,"report_reasons":null,"author":"HeroesDieYoung0","discussion_type":null,"num_comments":5,"send_replies":true,"media":null,"contest_mode":false,"author_patreon_flair":false,"author_flair_text_color":null,"permalink":"/r/LocalLLaMA/comments/1lm4tno/build_advice_question_for_repurposing_spare_gpus/","stickied":false,"url":"https://www.reddit.com/r/LocalLLaMA/comments/1lm4tno/build_advice_question_for_repurposing_spare_gpus/","subreddit_subscribers":492572,"created_utc":1751057588,"num_crossposts":0,"mod_reports":[],"is_video":false}}],"before":null}},{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n0541b9","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Wild_Requirement8902","can_mod_post":false,"created_utc":1751061346,"send_replies":true,"parent_id":"t3_1lm4tno","score":2,"author_fullname":"t2_98yqzbqx","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"i use a 3060 12gb and a 1080 8gb it helps with token per second but since they have diferent cuda capabilty it kind of not as good as it could but since yours are all of the same family it should work quite nicely","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n0541b9","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;i use a 3060 12gb and a 1080 8gb it helps with token per second but since they have diferent cuda capabilty it kind of not as good as it could but since yours are all of the same family it should work quite nicely&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lm4tno/build_advice_question_for_repurposing_spare_gpus/n0541b9/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751061346,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lm4tno","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n05f21d","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Afganitia","can_mod_post":false,"created_utc":1751065087,"send_replies":true,"parent_id":"t3_1lm4tno","score":1,"author_fullname":"t2_14tq8s","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"1. Yes. Yes, some layers go to one GPU some to the other. \\n2. The slowest GPU is basically the bottleneck. So depends if they are the same GPU model (answer is no) or different ones (then yes). \\n3. For inference is mostly fine. No problem most likely. Training not gonna cut it, though. \\n4. 6 cards is fine. 8 cards is fine. 100 cards possibly is not. Overhead probably starts getting noticeable. Also, having more cards than layers in the NN would be useless. Note that a model like Qwen 8b has 64 layers. ","edited":1751065348,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n05f21d","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;ol&gt;\\n&lt;li&gt;Yes. Yes, some layers go to one GPU some to the other. &lt;/li&gt;\\n&lt;li&gt;The slowest GPU is basically the bottleneck. So depends if they are the same GPU model (answer is no) or different ones (then yes). &lt;/li&gt;\\n&lt;li&gt;For inference is mostly fine. No problem most likely. Training not gonna cut it, though. &lt;/li&gt;\\n&lt;li&gt;6 cards is fine. 8 cards is fine. 100 cards possibly is not. Overhead probably starts getting noticeable. Also, having more cards than layers in the NN would be useless. Note that a model like Qwen 8b has 64 layers. &lt;/li&gt;\\n&lt;/ol&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lm4tno/build_advice_question_for_repurposing_spare_gpus/n05f21d/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751065087,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lm4tno","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n072mpt","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"PermanentLiminality","can_mod_post":false,"created_utc":1751089174,"send_replies":true,"parent_id":"t3_1lm4tno","score":1,"author_fullname":"t2_19zqycaf","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"A LLM can spam multiple cards.  Most speech to text or text to speech can't.   X1 PCIe isn't ideal, but it will work.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n072mpt","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;A LLM can spam multiple cards.  Most speech to text or text to speech can&amp;#39;t.   X1 PCIe isn&amp;#39;t ideal, but it will work.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lm4tno/build_advice_question_for_repurposing_spare_gpus/n072mpt/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751089174,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lm4tno","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n08vp0q","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Marksta","can_mod_post":false,"created_utc":1751121027,"send_replies":true,"parent_id":"t3_1lm4tno","score":1,"author_fullname":"t2_559a1","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Hook them up bud, that system is going to rip with even just the 2x 3080. 60gb vram is going to be really nice. No problems using them all, even on 1x.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n08vp0q","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Hook them up bud, that system is going to rip with even just the 2x 3080. 60gb vram is going to be really nice. No problems using them all, even on 1x.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lm4tno/build_advice_question_for_repurposing_spare_gpus/n08vp0q/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751121027,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lm4tno","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}}]`),r=()=>e.jsx(t,{data:a});export{r as default};
