import{j as e}from"./index-CqAPCjw5.js";import{R as t}from"./RedditPostRenderer-4oBDAtGr.js";import"./index-D3Sdy_Op.js";const l=JSON.parse(`[{"kind":"Listing","data":{"after":null,"dist":1,"modhash":"","geo_filter":"","children":[{"kind":"t3","data":{"approved_at_utc":null,"subreddit":"LocalLLaMA","selftext":"Hello Everyone,\\n\\nI'm working on a personal project where I'm using llama.rn (wrapper of llama.cpp). \\n\\nI'm trying to make an inference from local model (Gemma3n-E2B- INT4). Everything works fine. The only thing I'm struggling with is, the initial inference. The initial inference takes a lot of time. But the subsequent ones are pretty good. Like 2-3s ish. I use a s22+. \\n\\nCan someone please tell me how do I speed up the initial inference ?\\n\\n1. The initial inference is slow because it has to instantiate the model for the first time ?\\n\\n2. Would warming up the model with a dummy inference before the actual inference be helpful ?\\n\\n3. I tried looking into GPU and npu delegates but it's very confusing as I'm just starting out. There is Qualcomm NPU delegate and tflite delegate for GPU as well. \\n\\n4. Or should I try to optimize/\\n Quantize the model even more to make the inference faster ?\\n\\nAny inputs are appreciated. I'm just a beginner so please let me know if I made any mistakes. Thanks ðŸ™ðŸ»","user_reports":[],"saved":false,"mod_reason_title":null,"gilded":0,"clicked":false,"title":"How to speed up the initial inference when using llama.rn (llama.cpp) wrapper on android.","link_flair_richtext":[{"e":"text","t":"Question | Help"}],"subreddit_name_prefixed":"r/LocalLLaMA","hidden":false,"pwls":6,"link_flair_css_class":"","downs":0,"thumbnail_height":null,"top_awarded_type":null,"hide_score":false,"name":"t3_1m42n4v","quarantine":false,"link_flair_text_color":"dark","upvote_ratio":0.81,"author_flair_background_color":null,"subreddit_type":"public","ups":3,"total_awards_received":0,"media_embed":{},"thumbnail_width":null,"author_flair_template_id":null,"is_original_content":false,"author_fullname":"t2_4eg9l8h9","secure_media":null,"is_reddit_media_domain":false,"is_meta":false,"category":null,"secure_media_embed":{},"link_flair_text":"Question | Help","can_mod_post":false,"score":3,"approved_by":null,"is_created_from_ads_ui":false,"author_premium":false,"thumbnail":"self","edited":false,"author_flair_css_class":null,"author_flair_richtext":[],"gildings":{},"content_categories":null,"is_self":true,"mod_note":null,"created":1752947989,"link_flair_type":"richtext","wls":6,"removed_by_category":null,"banned_by":null,"author_flair_type":"text","domain":"self.LocalLLaMA","allow_live_comments":false,"selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\\"md\\"&gt;&lt;p&gt;Hello Everyone,&lt;/p&gt;\\n\\n&lt;p&gt;I&amp;#39;m working on a personal project where I&amp;#39;m using llama.rn (wrapper of llama.cpp). &lt;/p&gt;\\n\\n&lt;p&gt;I&amp;#39;m trying to make an inference from local model (Gemma3n-E2B- INT4). Everything works fine. The only thing I&amp;#39;m struggling with is, the initial inference. The initial inference takes a lot of time. But the subsequent ones are pretty good. Like 2-3s ish. I use a s22+. &lt;/p&gt;\\n\\n&lt;p&gt;Can someone please tell me how do I speed up the initial inference ?&lt;/p&gt;\\n\\n&lt;ol&gt;\\n&lt;li&gt;&lt;p&gt;The initial inference is slow because it has to instantiate the model for the first time ?&lt;/p&gt;&lt;/li&gt;\\n&lt;li&gt;&lt;p&gt;Would warming up the model with a dummy inference before the actual inference be helpful ?&lt;/p&gt;&lt;/li&gt;\\n&lt;li&gt;&lt;p&gt;I tried looking into GPU and npu delegates but it&amp;#39;s very confusing as I&amp;#39;m just starting out. There is Qualcomm NPU delegate and tflite delegate for GPU as well. &lt;/p&gt;&lt;/li&gt;\\n&lt;li&gt;&lt;p&gt;Or should I try to optimize/\\nQuantize the model even more to make the inference faster ?&lt;/p&gt;&lt;/li&gt;\\n&lt;/ol&gt;\\n\\n&lt;p&gt;Any inputs are appreciated. I&amp;#39;m just a beginner so please let me know if I made any mistakes. Thanks ðŸ™ðŸ»&lt;/p&gt;\\n&lt;/div&gt;&lt;!-- SC_ON --&gt;","likes":null,"suggested_sort":null,"banned_at_utc":null,"view_count":null,"archived":false,"no_follow":false,"is_crosspostable":false,"pinned":false,"over_18":false,"all_awardings":[],"awarders":[],"media_only":false,"link_flair_template_id":"2c9831e6-bf92-11ed-98e6-d2b8bcc02ae1","can_gild":false,"spoiler":false,"locked":false,"author_flair_text":null,"treatment_tags":[],"visited":false,"removed_by":null,"num_reports":null,"distinguished":null,"subreddit_id":"t5_81eyvm","author_is_blocked":false,"mod_reason_by":null,"removal_reason":null,"link_flair_background_color":"#5a74cc","id":"1m42n4v","is_robot_indexable":true,"num_duplicates":0,"report_reasons":null,"author":"luffy2998","discussion_type":null,"num_comments":1,"send_replies":true,"media":null,"contest_mode":false,"author_patreon_flair":false,"author_flair_text_color":null,"permalink":"/r/LocalLLaMA/comments/1m42n4v/how_to_speed_up_the_initial_inference_when_using/","stickied":false,"url":"https://www.reddit.com/r/LocalLLaMA/comments/1m42n4v/how_to_speed_up_the_initial_inference_when_using/","subreddit_subscribers":502030,"created_utc":1752947989,"num_crossposts":0,"mod_reports":[],"is_video":false}}],"before":null}},{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n41robl","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Awwtifishal","can_mod_post":false,"created_utc":1752954791,"send_replies":true,"parent_id":"t3_1m42n4v","score":1,"author_fullname":"t2_1d96a8k10t","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"What part of the start up is loading the model and warm up, and what part of it is processing the context? To figure it out change something at the beginning of the system message, it should invalidate pretty much the whole KV cache and will have to preprocess it again. That part can be sped up by storing the KV cache to permanent memory, and loading it at start up. But the rest cannot.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n41robl","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;What part of the start up is loading the model and warm up, and what part of it is processing the context? To figure it out change something at the beginning of the system message, it should invalidate pretty much the whole KV cache and will have to preprocess it again. That part can be sped up by storing the KV cache to permanent memory, and loading it at start up. But the rest cannot.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1m42n4v/how_to_speed_up_the_initial_inference_when_using/n41robl/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1752954791,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1m42n4v","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}}]`),r=()=>e.jsx(t,{data:l});export{r as default};
