import{j as e}from"./index-C_z07ZVC.js";import{R as l}from"./RedditPostRenderer-DPnSR41P.js";import"./index-DKzOAewW.js";const t=JSON.parse(`[{"kind":"Listing","data":{"after":null,"dist":1,"modhash":"","geo_filter":"","children":[{"kind":"t3","data":{"approved_at_utc":null,"subreddit":"LocalLLaMA","selftext":"Most RAG explainers jump into theories and scary infra diagrams. Here‚Äôs the tiny end-to-end demo that can easy to understand for me:\\n\\nSuppose we have a documentation like this: \\"Boil an egg. Poach an egg. How to change a tire\\"\\n\\n# Step 1: Chunk\\n\\n    S0: \\"Boil an egg\\"\\n    S1: \\"Poach an egg\\"\\n    S2: \\"How to change a tire\\"\\n\\n# Step 2: Embed\\n\\nAfter the words ‚ÄúBoil an egg‚Äù pass through a pretrained transformer, the model compresses its hidden states into a single 4-dimensional vector; each value is just one coordinate of that learned ‚Äúmeaning point‚Äù in vector space.\\n\\nToy demo values:\\n\\n    V0 = [ 0.90, 0.10, 0.00, 0.10]   # ‚ÄúBoil an egg‚Äù\\n    V1 = [ 0.88, 0.12, 0.00, 0.09]   # ‚ÄúPoach an egg‚Äù\\n    V2 = [-0.20, 0.40, 0.80, 0.10]   # ‚ÄúHow to change a tire‚Äù\\n\\n(Real models spit out 384-D to 3072-D vectors; 4-D keeps the math readable.)\\n\\n# Step 3: Normalize\\n\\nPut every vector on the unit sphere:\\n\\n    # Normalised (unit-length) vectors\\n    V0ÃÇ = [ 0.988, 0.110, 0.000, 0.110]   # 0.988¬≤ + 0.110¬≤ + 0.000¬≤ + 0.110¬≤ ‚âà 1.000 ‚Üí 1\\n    V1ÃÇ = [ 0.986, 0.134, 0.000, 0.101]   # 0.986¬≤ + 0.134¬≤ + 0.000¬≤ + 0.101¬≤ ‚âà 1.000 ‚Üí 1\\n    V2ÃÇ = [-0.217, 0.434, 0.868, 0.108]   # (-0.217)¬≤ + 0.434¬≤ + 0.868¬≤ + 0.108¬≤ ‚âà 1.001 ‚Üí 1\\n\\n# Step 4: Index\\n\\nDrop V0\\\\^,V1\\\\^,V2\\\\^ into a similarity index (FAISS, Qdrant, etc.).  \\nKeep a side map \`{0:S0, 1:S1, 2:S2}\` so IDs can turn back into text later.\\n\\n# Step 5: Similarity Search\\n\\n**User asks**  \\n‚ÄúBest way to cook an egg?‚Äù\\n\\nWe embed this sentence and normalize it as well, which gives us something like:\\n\\n    Vi^ = [0.989, 0.086, 0.000, 0.118]\\n\\nThen we need to find the vector that‚Äôs *closest* to this one.  \\nThe most common way is cosine similarity ‚Äî often written as:\\n\\n    cos(Œ∏) = (A ‚ãÖ B) / (‚ÄñA‚Äñ √ó ‚ÄñB‚Äñ)\\n\\nBut since we already normalized all vectors,  \\n‚ÄñA‚Äñ = ‚ÄñB‚Äñ = 1 ‚Üí so the formula becomes just:\\n\\n    cos(Œ∏) = A ‚ãÖ B\\n\\nThis means we just need to calculate the **dot product** between the user input vector and each stored vector.  \\nIf two vectors are exactly the same, dot product = 1.  \\nSo we sort by which ones have values closest to 1 - higher = more similar.\\n\\nLet‚Äôs calculate the scores (example, not real)\\n\\n    Vi^ ‚ãÖ V0ÃÇ = (0.989)(0.988) + (0.086)(0.110) + (0)(0) + (0.118)(0.110)\\n            ‚âà 0.977 + 0.009 + 0 + 0.013 = 0.999\\n    \\n    Vi^ ‚ãÖ V1ÃÇ = (0.989)(0.986) + (0.086)(0.134) + (0)(0) + (0.118)(0.101)\\n            ‚âà 0.975 + 0.012 + 0 + 0.012 = 0.999\\n    \\n    Vi^ ‚ãÖ V2ÃÇ = (0.989)(-0.217) + (0.086)(0.434) + (0)(0.868) + (0.118)(0.108)\\n            ‚âà -0.214 + 0.037 + 0 + 0.013 = -0.164\\n    \\n\\nSo we find that sentence 0 (‚ÄúBoil an egg‚Äù) and sentence 1 (‚ÄúPoach an egg‚Äù)  \\nare both very close to the user input.\\n\\nWe **retrieve those two as context**, and pass them to the LLM.  \\nNow the LLM has relevant info to answer accurately, instead of guessing.","user_reports":[],"saved":false,"mod_reason_title":null,"gilded":0,"clicked":false,"title":"How RAG actually works ‚Äî a toy example with real math","link_flair_richtext":[{"e":"text","t":"Tutorial | Guide"}],"subreddit_name_prefixed":"r/LocalLLaMA","hidden":false,"pwls":6,"link_flair_css_class":"","downs":0,"thumbnail_height":null,"top_awarded_type":null,"hide_score":false,"name":"t3_1lrsx20","quarantine":false,"link_flair_text_color":"light","upvote_ratio":0.96,"author_flair_background_color":null,"subreddit_type":"public","ups":577,"total_awards_received":0,"media_embed":{},"thumbnail_width":null,"author_flair_template_id":null,"is_original_content":false,"author_fullname":"t2_1pnlpczpqa","secure_media":null,"is_reddit_media_domain":false,"is_meta":false,"category":null,"secure_media_embed":{},"link_flair_text":"Tutorial | Guide","can_mod_post":false,"score":577,"approved_by":null,"is_created_from_ads_ui":false,"author_premium":false,"thumbnail":"self","edited":false,"author_flair_css_class":null,"author_flair_richtext":[],"gildings":{},"content_categories":null,"is_self":true,"mod_note":null,"created":1751661855,"link_flair_type":"richtext","wls":6,"removed_by_category":null,"banned_by":null,"author_flair_type":"text","domain":"self.LocalLLaMA","allow_live_comments":false,"selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\\"md\\"&gt;&lt;p&gt;Most RAG explainers jump into theories and scary infra diagrams. Here‚Äôs the tiny end-to-end demo that can easy to understand for me:&lt;/p&gt;\\n\\n&lt;p&gt;Suppose we have a documentation like this: &amp;quot;Boil an egg. Poach an egg. How to change a tire&amp;quot;&lt;/p&gt;\\n\\n&lt;h1&gt;Step 1: Chunk&lt;/h1&gt;\\n\\n&lt;pre&gt;&lt;code&gt;S0: &amp;quot;Boil an egg&amp;quot;\\nS1: &amp;quot;Poach an egg&amp;quot;\\nS2: &amp;quot;How to change a tire&amp;quot;\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;h1&gt;Step 2: Embed&lt;/h1&gt;\\n\\n&lt;p&gt;After the words ‚ÄúBoil an egg‚Äù pass through a pretrained transformer, the model compresses its hidden states into a single 4-dimensional vector; each value is just one coordinate of that learned ‚Äúmeaning point‚Äù in vector space.&lt;/p&gt;\\n\\n&lt;p&gt;Toy demo values:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;V0 = [ 0.90, 0.10, 0.00, 0.10]   # ‚ÄúBoil an egg‚Äù\\nV1 = [ 0.88, 0.12, 0.00, 0.09]   # ‚ÄúPoach an egg‚Äù\\nV2 = [-0.20, 0.40, 0.80, 0.10]   # ‚ÄúHow to change a tire‚Äù\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;(Real models spit out 384-D to 3072-D vectors; 4-D keeps the math readable.)&lt;/p&gt;\\n\\n&lt;h1&gt;Step 3: Normalize&lt;/h1&gt;\\n\\n&lt;p&gt;Put every vector on the unit sphere:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;# Normalised (unit-length) vectors\\nV0ÃÇ = [ 0.988, 0.110, 0.000, 0.110]   # 0.988¬≤ + 0.110¬≤ + 0.000¬≤ + 0.110¬≤ ‚âà 1.000 ‚Üí 1\\nV1ÃÇ = [ 0.986, 0.134, 0.000, 0.101]   # 0.986¬≤ + 0.134¬≤ + 0.000¬≤ + 0.101¬≤ ‚âà 1.000 ‚Üí 1\\nV2ÃÇ = [-0.217, 0.434, 0.868, 0.108]   # (-0.217)¬≤ + 0.434¬≤ + 0.868¬≤ + 0.108¬≤ ‚âà 1.001 ‚Üí 1\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;h1&gt;Step 4: Index&lt;/h1&gt;\\n\\n&lt;p&gt;Drop V0^,V1^,V2^ into a similarity index (FAISS, Qdrant, etc.).&lt;br/&gt;\\nKeep a side map &lt;code&gt;{0:S0, 1:S1, 2:S2}&lt;/code&gt; so IDs can turn back into text later.&lt;/p&gt;\\n\\n&lt;h1&gt;Step 5: Similarity Search&lt;/h1&gt;\\n\\n&lt;p&gt;&lt;strong&gt;User asks&lt;/strong&gt;&lt;br/&gt;\\n‚ÄúBest way to cook an egg?‚Äù&lt;/p&gt;\\n\\n&lt;p&gt;We embed this sentence and normalize it as well, which gives us something like:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;Vi^ = [0.989, 0.086, 0.000, 0.118]\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;Then we need to find the vector that‚Äôs &lt;em&gt;closest&lt;/em&gt; to this one.&lt;br/&gt;\\nThe most common way is cosine similarity ‚Äî often written as:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;cos(Œ∏) = (A ‚ãÖ B) / (‚ÄñA‚Äñ √ó ‚ÄñB‚Äñ)\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;But since we already normalized all vectors,&lt;br/&gt;\\n‚ÄñA‚Äñ = ‚ÄñB‚Äñ = 1 ‚Üí so the formula becomes just:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;cos(Œ∏) = A ‚ãÖ B\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;This means we just need to calculate the &lt;strong&gt;dot product&lt;/strong&gt; between the user input vector and each stored vector.&lt;br/&gt;\\nIf two vectors are exactly the same, dot product = 1.&lt;br/&gt;\\nSo we sort by which ones have values closest to 1 - higher = more similar.&lt;/p&gt;\\n\\n&lt;p&gt;Let‚Äôs calculate the scores (example, not real)&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;Vi^ ‚ãÖ V0ÃÇ = (0.989)(0.988) + (0.086)(0.110) + (0)(0) + (0.118)(0.110)\\n        ‚âà 0.977 + 0.009 + 0 + 0.013 = 0.999\\n\\nVi^ ‚ãÖ V1ÃÇ = (0.989)(0.986) + (0.086)(0.134) + (0)(0) + (0.118)(0.101)\\n        ‚âà 0.975 + 0.012 + 0 + 0.012 = 0.999\\n\\nVi^ ‚ãÖ V2ÃÇ = (0.989)(-0.217) + (0.086)(0.434) + (0)(0.868) + (0.118)(0.108)\\n        ‚âà -0.214 + 0.037 + 0 + 0.013 = -0.164\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;So we find that sentence 0 (‚ÄúBoil an egg‚Äù) and sentence 1 (‚ÄúPoach an egg‚Äù)&lt;br/&gt;\\nare both very close to the user input.&lt;/p&gt;\\n\\n&lt;p&gt;We &lt;strong&gt;retrieve those two as context&lt;/strong&gt;, and pass them to the LLM.&lt;br/&gt;\\nNow the LLM has relevant info to answer accurately, instead of guessing.&lt;/p&gt;\\n&lt;/div&gt;&lt;!-- SC_ON --&gt;","likes":null,"suggested_sort":null,"banned_at_utc":null,"view_count":null,"archived":false,"no_follow":false,"is_crosspostable":false,"pinned":false,"over_18":false,"all_awardings":[],"awarders":[],"media_only":false,"link_flair_template_id":"449b05a6-bf8e-11ed-b4bd-66961e47bd50","can_gild":false,"spoiler":false,"locked":false,"author_flair_text":null,"treatment_tags":[],"visited":false,"removed_by":null,"num_reports":null,"distinguished":null,"subreddit_id":"t5_81eyvm","author_is_blocked":false,"mod_reason_by":null,"removal_reason":null,"link_flair_background_color":"#0079d3","id":"1lrsx20","is_robot_indexable":true,"num_duplicates":1,"report_reasons":null,"author":"Main-Fisherman-2075","discussion_type":null,"num_comments":60,"send_replies":true,"media":null,"contest_mode":false,"author_patreon_flair":false,"author_flair_text_color":null,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/","stickied":false,"url":"https://www.reddit.com/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/","subreddit_subscribers":494897,"created_utc":1751661855,"num_crossposts":1,"mod_reports":[],"is_video":false}}],"before":null}},{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gci3r","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"amarao_san","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1g82bm","score":8,"author_fullname":"t2_ps08rdmy","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I think, those things should be addressed differently.\\n\\nCan we represent the table with this nastiness as markdown?\\n\\nWe can!\\n\\nNot as a table. a big chapter, where you 'flatten' the table into sections, each with full title ((column header ) and (raw header)).\\n\\nThis instantly reduce cognitive load on any reader. Text not become too long (yes, there is heater repetition, but this just brings context closer).\\n\\nTable to text should be part of the normal preprocessing. IMHO.\\n\\nThe same goes for any nesting. Loop unrolling for constant expressions yields constant amount of elements.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1gci3r","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I think, those things should be addressed differently.&lt;/p&gt;\\n\\n&lt;p&gt;Can we represent the table with this nastiness as markdown?&lt;/p&gt;\\n\\n&lt;p&gt;We can!&lt;/p&gt;\\n\\n&lt;p&gt;Not as a table. a big chapter, where you &amp;#39;flatten&amp;#39; the table into sections, each with full title ((column header ) and (raw header)).&lt;/p&gt;\\n\\n&lt;p&gt;This instantly reduce cognitive load on any reader. Text not become too long (yes, there is heater repetition, but this just brings context closer).&lt;/p&gt;\\n\\n&lt;p&gt;Table to text should be part of the normal preprocessing. IMHO.&lt;/p&gt;\\n\\n&lt;p&gt;The same goes for any nesting. Loop unrolling for constant expressions yields constant amount of elements.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gci3r/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751714371,"author_flair_text":null,"treatment_tags":[],"created_utc":1751714371,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":8}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1i2t3j","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Tr4sHCr4fT","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1g9vw0","score":1,"author_fullname":"t2_dlmas","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"bro just needs to find wristwatch in the n-dimensional tesseract and binary pull it","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1i2t3j","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;bro just needs to find wristwatch in the n-dimensional tesseract and binary pull it&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1i2t3j/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751736848,"author_flair_text":null,"treatment_tags":[],"created_utc":1751736848,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1g9vw0","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Frog17000000","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1g82bm","score":2,"author_fullname":"t2_1ndqhesvuo","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I have no idea what you're trying to say bro","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1g9vw0","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I have no idea what you&amp;#39;re trying to say bro&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1g9vw0/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751712951,"author_flair_text":null,"treatment_tags":[],"created_utc":1751712951,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1g82bm","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Maykey","can_mod_post":false,"created_utc":1751711932,"send_replies":true,"parent_id":"t1_n1fu2mb","score":9,"author_fullname":"t2_17tuu7pv","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Hear, hear. I don't have data so toy it can be copy-pasted into llm raw without massive preprocessing. Not just chunking, but massive preprocessing. Not *just* preprocessing, but massive one.\\n\\nEg I have docx/odt/pdfs(docx original; but this conversion is easy) docs that have giant tables of 20+ rows that are even impossible to represent in markdown(so no easy logseq for manual labor me). Eg one column can have a bullet point list with 10+ items. Other column - several blocks of code with explanations before and after. Of course there are rowspans and colspans. And of course in original doc some content is ~~stroked out~~ as irrelevant for months. Of course, there are also xlslx attachement**s** embedded in docx.\\n\\nIn my wet dreams one day we'll get RNNs that are able to remember a lot for O(1) which will help to better rank the query than just cosine similarity. (Actually we may have it, \\"wet dreams\\" and \\"reading arxiv\\" are not the same)","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1g82bm","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Hear, hear. I don&amp;#39;t have data so toy it can be copy-pasted into llm raw without massive preprocessing. Not just chunking, but massive preprocessing. Not &lt;em&gt;just&lt;/em&gt; preprocessing, but massive one.&lt;/p&gt;\\n\\n&lt;p&gt;Eg I have docx/odt/pdfs(docx original; but this conversion is easy) docs that have giant tables of 20+ rows that are even impossible to represent in markdown(so no easy logseq for manual labor me). Eg one column can have a bullet point list with 10+ items. Other column - several blocks of code with explanations before and after. Of course there are rowspans and colspans. And of course in original doc some content is &lt;del&gt;stroked out&lt;/del&gt; as irrelevant for months. Of course, there are also xlslx attachement&lt;strong&gt;s&lt;/strong&gt; embedded in docx.&lt;/p&gt;\\n\\n&lt;p&gt;In my wet dreams one day we&amp;#39;ll get RNNs that are able to remember a lot for O(1) which will help to better rank the query than just cosine similarity. (Actually we may have it, &amp;quot;wet dreams&amp;quot; and &amp;quot;reading arxiv&amp;quot; are not the same)&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1g82bm/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751711932,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":9}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fu2mb","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Frog17000000","can_mod_post":false,"created_utc":1751703291,"send_replies":true,"parent_id":"t3_1lrsx20","score":44,"author_fullname":"t2_1ndqhesvuo","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"&gt; Step 1: Chunk\\n\\nThis is like 99% of the problem","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fu2mb","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;blockquote&gt;\\n&lt;p&gt;Step 1: Chunk&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;This is like 99% of the problem&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fu2mb/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751703291,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":44}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"richtext","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":"ed89e5c6-72f1-11ee-9954-1697022cd89d","likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1hh1fk","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"No_Afternoon_4260","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1eprxf","score":2,"author_fullname":"t2_cj9kap4bx","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Care to elaborate on hypernetwork?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1hh1fk","is_submitter":false,"downs":0,"author_flair_richtext":[{"e":"text","t":"llama.cpp"}],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Care to elaborate on hypernetwork?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":"light","score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1hh1fk/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751729990,"author_flair_text":"llama.cpp","treatment_tags":[],"created_utc":1751729990,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":"#bbbdbf","collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1eprxf","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"lompocus","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1ektoa","score":4,"author_fullname":"t2_f4boq","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"This sent me on quite the adventure, thx. The more recent research reminds me a bit of hypernetworks.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1eprxf","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;This sent me on quite the adventure, thx. The more recent research reminds me a bit of hypernetworks.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1eprxf/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751682245,"author_flair_text":null,"treatment_tags":[],"created_utc":1751682245,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":4}}],"before":null}},"user_reports":[],"saved":false,"id":"n1ektoa","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Affectionate-Cap-600","can_mod_post":false,"created_utc":1751680096,"send_replies":true,"parent_id":"t1_n1dy9i7","score":14,"author_fullname":"t2_5oltmr5b","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"if you mean something like Colbert, , it use the maxsim operator between the two arrays of seq len * dims","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ektoa","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;if you mean something like Colbert, , it use the maxsim operator between the two arrays of seq len * dims&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1ektoa/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751680096,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":14}}],"before":null}},"user_reports":[],"saved":false,"id":"n1dy9i7","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"lompocus","can_mod_post":false,"created_utc":1751670825,"send_replies":true,"parent_id":"t3_1lrsx20","score":40,"author_fullname":"t2_f4boq","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"How does it work when you are using multivectors instead of vectors?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1dy9i7","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;How does it work when you are using multivectors instead of vectors?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1dy9i7/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751670825,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":40}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gktx2","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"mxforest","can_mod_post":false,"created_utc":1751718407,"send_replies":true,"parent_id":"t1_n1e5puw","score":4,"author_fullname":"t2_kenmq","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"ü•ágold is an emoji","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gktx2","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;ü•ágold is an emoji&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gktx2/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751718407,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":4}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1f1ln9","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mycall","can_mod_post":false,"created_utc":1751687599,"send_replies":true,"parent_id":"t1_n1e5puw","score":3,"author_fullname":"t2_22rf5","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Golden Heart Award repeats","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f1ln9","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Golden Heart Award repeats&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1f1ln9/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751687599,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n1e5puw","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"GreenTreeAndBlueSky","can_mod_post":false,"created_utc":1751673684,"send_replies":true,"parent_id":"t3_1lrsx20","score":65,"author_fullname":"t2_1p50pl73j2","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Fucking quality post right there. Would give gold if I were to spend for that kinda stuff.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1e5puw","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Fucking quality post right there. Would give gold if I were to spend for that kinda stuff.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1e5puw/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751673684,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":65}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gcs89","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"amarao_san","can_mod_post":false,"created_utc":1751714518,"send_replies":true,"parent_id":"t1_n1fvimg","score":3,"author_fullname":"t2_ps08rdmy","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"It fails at implied structure. People get trained to read those documents (you can't read those without someone mentoring you first where to look). AI is not trained, and it can't extract meaning.\\n\\nIngestors should be a priority for RAG. How to get knowledge from a pipe of junk with useless prefaces, odd formating and implied meaning based (basically) on optical illusions for humans?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gcs89","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;It fails at implied structure. People get trained to read those documents (you can&amp;#39;t read those without someone mentoring you first where to look). AI is not trained, and it can&amp;#39;t extract meaning.&lt;/p&gt;\\n\\n&lt;p&gt;Ingestors should be a priority for RAG. How to get knowledge from a pipe of junk with useless prefaces, odd formating and implied meaning based (basically) on optical illusions for humans?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gcs89/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751714518,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fvimg","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"MutableLambda","can_mod_post":false,"created_utc":1751704180,"send_replies":true,"parent_id":"t3_1lrsx20","score":9,"author_fullname":"t2_grp1l","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Now scale it to millions of documents, where naive RAG falls apart?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fvimg","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Now scale it to millions of documents, where naive RAG falls apart?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fvimg/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751704180,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":9}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1f95sa","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Long_Woodpecker2370","can_mod_post":false,"created_utc":1751691358,"send_replies":true,"parent_id":"t3_1lrsx20","score":5,"author_fullname":"t2_1g7d4o9onj","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"You are amazing !","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f95sa","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;You are amazing !&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1f95sa/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751691358,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":5}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1ivuj9","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"hotnerds28","can_mod_post":false,"created_utc":1751746297,"send_replies":true,"parent_id":"t3_1lrsx20","score":4,"author_fullname":"t2_eoq08","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Only on Reddit: 500 upvotes for someone who can't tell \\"hammer\\" and \\"carpentry\\" apart to explain how it \\"actually works\\" by throwing around numbers from air pressure and muscle energy output, as if that's all there is to it.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ivuj9","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Only on Reddit: 500 upvotes for someone who can&amp;#39;t tell &amp;quot;hammer&amp;quot; and &amp;quot;carpentry&amp;quot; apart to explain how it &amp;quot;actually works&amp;quot; by throwing around numbers from air pressure and muscle energy output, as if that&amp;#39;s all there is to it.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1ivuj9/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751746297,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":4}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1hc46x","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"robberviet","can_mod_post":false,"created_utc":1751728438,"send_replies":true,"parent_id":"t1_n1fylk3","score":1,"author_fullname":"t2_jxc5a","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I am using ripgrep lmao, still ok for my needs as I control how I search. Some might use full text search.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1hc46x","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I am using ripgrep lmao, still ok for my needs as I control how I search. Some might use full text search.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1hc46x/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751728438,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fylk3","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"ohdog","can_mod_post":false,"created_utc":1751706083,"send_replies":true,"parent_id":"t3_1lrsx20","score":10,"author_fullname":"t2_7zmam","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"RAG is an architectural pattern that can include vector search but doesn't have to. This is why they jump to \\"scary\\" infra diagrams, because that is what RAG is. It just means you are retrieving information from some source to the model context and generating off of that, nothing more than that.","edited":1751706680,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fylk3","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;RAG is an architectural pattern that can include vector search but doesn&amp;#39;t have to. This is why they jump to &amp;quot;scary&amp;quot; infra diagrams, because that is what RAG is. It just means you are retrieving information from some source to the model context and generating off of that, nothing more than that.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fylk3/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706083,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":10}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1hzklp","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"full_stack_dev","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1hpuf5","score":2,"author_fullname":"t2_ofadi","approved_by":null,"mod_note":null,"all_awardings":[],"body":"Thresholds are a little fuzzy in high dimensions. It is not like using Hamming distance between words or sentences. They can even change between queries.","edited":false,"gildings":{},"downs":0,"author_flair_css_class":null,"name":"t1_n1hzklp","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Thresholds are a little fuzzy in high dimensions. It is not like using Hamming distance between words or sentences. They can even change between queries.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1hzklp/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751735858,"author_flair_text":null,"treatment_tags":[],"created_utc":1751735858,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":5,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1hpuf5","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Federal_Order4324","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1gvc83","score":1,"author_fullname":"t2_rlhobztpn","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Doesn't setting some sort of similarity threshold mitigate the issues having not so relevant information injected into LLM context?","edited":false,"author_flair_css_class":null,"name":"t1_n1hpuf5","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Doesn&amp;#39;t setting some sort of similarity threshold mitigate the issues having not so relevant information injected into LLM context?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1hpuf5/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751732820,"author_flair_text":null,"collapsed":false,"created_utc":1751732820,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1gvc83","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"full_stack_dev","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1gqgf9","score":2,"author_fullname":"t2_ofadi","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Yes, that is exactly the problem with similarity search. It will always return something and even if you use very specific keywords, other terms in the matching document or the search phrase can throw it off. \\n\\nSo using a (non-llm) re-ranking function can let exact matches from old fashion full-text search indexes (these can often take modifiers like \\"-\\" to not include a term or partial term matches from stemming) out-rank similarity search matches.\\n\\nYou often want this anyway. Similarity search, in general, is only really good for recommendations or \\"close\\" matches to what you asked for if there are not exact matches. Also, some embeddings are also surprisingly good at dealing with misspellings. All of which is useful, but not what people mean in a lot of cases, for example in a knowledge base, or for very specific RAG work.\\n\\nSimilarity search will always return data, so you can poison your context if you ask for something that isn't included. It will return extraneous data and now you are a few responses away from hallucinations or the LLM generating off-topic responses.\\n\\nAnd devs that are using only vectordb for RAG are fighting an uphill battle in quality.","edited":1751724114,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gvc83","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yes, that is exactly the problem with similarity search. It will always return something and even if you use very specific keywords, other terms in the matching document or the search phrase can throw it off. &lt;/p&gt;\\n\\n&lt;p&gt;So using a (non-llm) re-ranking function can let exact matches from old fashion full-text search indexes (these can often take modifiers like &amp;quot;-&amp;quot; to not include a term or partial term matches from stemming) out-rank similarity search matches.&lt;/p&gt;\\n\\n&lt;p&gt;You often want this anyway. Similarity search, in general, is only really good for recommendations or &amp;quot;close&amp;quot; matches to what you asked for if there are not exact matches. Also, some embeddings are also surprisingly good at dealing with misspellings. All of which is useful, but not what people mean in a lot of cases, for example in a knowledge base, or for very specific RAG work.&lt;/p&gt;\\n\\n&lt;p&gt;Similarity search will always return data, so you can poison your context if you ask for something that isn&amp;#39;t included. It will return extraneous data and now you are a few responses away from hallucinations or the LLM generating off-topic responses.&lt;/p&gt;\\n\\n&lt;p&gt;And devs that are using only vectordb for RAG are fighting an uphill battle in quality.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gvc83/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751722722,"author_flair_text":null,"treatment_tags":[],"created_utc":1751722722,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1gqgf9","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mitchins-au","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1gq6nc","score":1,"author_fullname":"t2_4hjtgq5u","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Great insights thanks. \\nI‚Äôve noticed how using specific and deliberate keywords may not always lead to the specific results you expect initially.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1gqgf9","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Great insights thanks. \\nI‚Äôve noticed how using specific and deliberate keywords may not always lead to the specific results you expect initially.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gqgf9/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751720808,"author_flair_text":null,"treatment_tags":[],"created_utc":1751720808,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1gq6nc","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"full_stack_dev","can_mod_post":false,"created_utc":1751720700,"send_replies":true,"parent_id":"t1_n1f4trw","score":8,"author_fullname":"t2_ofadi","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"&gt;a good RAG will also use BM-25 or TF-IDF.\\n\\nThese are typically used together. TF-IDF measures the importance of a word or phrase in a document and BM-25 is a function to rank those measures among the documents.\\n\\nThis is usually good to use if you have actual documents and not snippets of text or sentences that DBs are calling \\"documents\\" and you want to know which documents to return. TF-IDF is not good in practice for shorter texts.\\n\\nIf you are actually searching for something short, like a sentence or paragraph or name of a product, I prefer vector search + plain old FTS indexes then have them combined and ranked with reciprocal rank fusion for scoring.\\n\\nAll very fast and scalable (ms times for millions of items) and gives consistent scoring vs many other methods.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gq6nc","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;blockquote&gt;\\n&lt;p&gt;a good RAG will also use BM-25 or TF-IDF.&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;These are typically used together. TF-IDF measures the importance of a word or phrase in a document and BM-25 is a function to rank those measures among the documents.&lt;/p&gt;\\n\\n&lt;p&gt;This is usually good to use if you have actual documents and not snippets of text or sentences that DBs are calling &amp;quot;documents&amp;quot; and you want to know which documents to return. TF-IDF is not good in practice for shorter texts.&lt;/p&gt;\\n\\n&lt;p&gt;If you are actually searching for something short, like a sentence or paragraph or name of a product, I prefer vector search + plain old FTS indexes then have them combined and ranked with reciprocal rank fusion for scoring.&lt;/p&gt;\\n\\n&lt;p&gt;All very fast and scalable (ms times for millions of items) and gives consistent scoring vs many other methods.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gq6nc/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751720700,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":8}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fzsvv","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mitchins-au","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fzqua","score":1,"author_fullname":"t2_4hjtgq5u","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Agreed. Cosine is not the miracle neural cure pill","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1fzsvv","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Agreed. Cosine is not the miracle neural cure pill&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fzsvv/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706847,"author_flair_text":null,"treatment_tags":[],"created_utc":1751706847,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fzqua","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ohdog","can_mod_post":false,"created_utc":1751706812,"send_replies":true,"parent_id":"t1_n1f4trw","score":2,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"A good RAG will use whatever retrieval method is best for the task. It's use case specific and RAG is not married to a single search method.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fzqua","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;A good RAG will use whatever retrieval method is best for the task. It&amp;#39;s use case specific and RAG is not married to a single search method.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fzqua/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706812,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"richtext","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":"e75d59de-c910-11ed-9258-8e03d7ee129a","likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fyu20","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"AllanSundry2020","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fxm7k","score":4,"author_fullname":"t2_5tvkhk4q","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"that was the joke","edited":false,"author_flair_css_class":null,"name":"t1_n1fyu20","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;that was the joke&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fyu20/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706230,"author_flair_text":null,"collapsed":false,"created_utc":1751706230,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":4}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fxm7k","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"AppearanceHeavy6724","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fvkuq","score":0,"author_fullname":"t2_uz37qfx5","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"&gt;  TF-IDF\\n\\nDeath to IDF","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fxm7k","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;blockquote&gt;\\n&lt;p&gt;TF-IDF&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;Death to IDF&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fxm7k/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751705475,"author_flair_text":null,"treatment_tags":[],"created_utc":1751705475,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":1,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":0}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fvkuq","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"AllanSundry2020","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fknc8","score":3,"author_fullname":"t2_5tvkhk4q","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"idf unpopular right now","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1fvkuq","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;idf unpopular right now&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fvkuq/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751704216,"author_flair_text":null,"treatment_tags":[],"created_utc":1751704216,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fknc8","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"DigThatData","can_mod_post":false,"created_utc":1751697693,"send_replies":true,"parent_id":"t1_n1f4trw","score":3,"author_fullname":"t2_jozy285b","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"folks downvoting: BM25 is still ridiculously competitive. deal with it.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fknc8","is_submitter":false,"downs":0,"author_flair_richtext":[{"e":"text","t":"Llama 7B"}],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;folks downvoting: BM25 is still ridiculously competitive. deal with it.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":"light","score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fknc8/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751697693,"author_flair_text":"Llama 7B","treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":1,"depth":1,"author_flair_background_color":"#bbbdbf","collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}}],"before":null}},"user_reports":[],"saved":false,"id":"n1f4trw","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"mitchins-au","can_mod_post":false,"created_utc":1751689155,"send_replies":true,"parent_id":"t3_1lrsx20","score":9,"author_fullname":"t2_4hjtgq5u","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Great quality and simplicity. But you‚Äôre forgetting that a good RAG will also use BM-25 or TF-IDF.\\nThe lack thereof made me uninstall anything-LLM.\\n\\nEDIT: To clarify, words are important in relevance too, not just a cosine distance to embedding.","edited":1751721439,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f4trw","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Great quality and simplicity. But you‚Äôre forgetting that a good RAG will also use BM-25 or TF-IDF.\\nThe lack thereof made me uninstall anything-LLM.&lt;/p&gt;\\n\\n&lt;p&gt;EDIT: To clarify, words are important in relevance too, not just a cosine distance to embedding.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1f4trw/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751689155,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":9}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1j0fc4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"hotnerds28","can_mod_post":false,"created_utc":1751747789,"send_replies":true,"parent_id":"t3_1lrsx20","score":2,"author_fullname":"t2_eoq08","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"# How carpentry actually works ‚Äî a toy example with real math\\n\\nMost carpentry teachers jump into wood and scary materials theory. But I find this very difficult to understand. Here‚Äôs the tiny end-to-end demo that can easy to understand for me:\\n\\n# Suppose we have a nail.\\n\\nAnd we want to do carpentry on wood.\\n\\n# Step 1: Lift your arm\\n\\nThe tool weighs 1.5 kg.\\nWe raise it up about 70 cm using elbow and wrist.\\nCarpentry now enters a *pre-strike latent state*:\\n\\n    PE = m * g * h\\n       = 1.5 kg * 9.81 m/s¬≤ * 0.7 m\\n       ‚âà 10.3 Joules\\n\\nAt this point, **carpentry exists as potential** ‚Äî it is stored, waiting to become real.\\n\\n# Step 2: Swing\\n\\nWe now convert this potential carpentry into true carpentry via muscle contraction:\\n\\n    v = ‚àö(2gh) ‚âà ‚àö(2 * 9.81 * 0.7) ‚âà 3.7 m/s\\n\\nCarpentry reaches peak velocity. The wrist transmits the energy. The nail receives it.\\n\\n# Step 3: Contact\\n\\nImpact time ‚âà 0.02 seconds\\nWe deliver momentum:\\n\\n    Œîp = m * v = 1.5 * 3.7 = 5.55 kg¬∑m/s  \\n    F = Œîp / Œît = 5.55 / 0.02 = 277.5 N\\n\\nAt the moment of contact, the entire concept of carpentry is realized in 20 milliseconds.\\n\\nThis is it. This is carpentry.\\n\\n# Step 4: Tendon Load\\n\\nThe tendons absorb the reaction. Here's the rough tension in the forearm flexor:\\n\\n    T ‚âà F * arm leverage compensation ‚âà 277.5 N * 1.1 ‚âà 305 N\\n\\n# Step 5: Muscle Energy\\n\\nMuscle efficiency ‚âà 25%, so:\\n\\n    Energy burned = 10.3 J * 4 = 41.2 J per swing\\n\\n60 swings per minute = 2472 J/min = 41.2 W\\n\\n# Step 6: Conclusion\\n\\nPeople think carpentry is hard. But **when you do the math it is actually simple** to understand.","edited":1751774131,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1j0fc4","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;h1&gt;How carpentry actually works ‚Äî a toy example with real math&lt;/h1&gt;\\n\\n&lt;p&gt;Most carpentry teachers jump into wood and scary materials theory. But I find this very difficult to understand. Here‚Äôs the tiny end-to-end demo that can easy to understand for me:&lt;/p&gt;\\n\\n&lt;h1&gt;Suppose we have a nail.&lt;/h1&gt;\\n\\n&lt;p&gt;And we want to do carpentry on wood.&lt;/p&gt;\\n\\n&lt;h1&gt;Step 1: Lift your arm&lt;/h1&gt;\\n\\n&lt;p&gt;The tool weighs 1.5 kg.\\nWe raise it up about 70 cm using elbow and wrist.\\nCarpentry now enters a &lt;em&gt;pre-strike latent state&lt;/em&gt;:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;PE = m * g * h\\n   = 1.5 kg * 9.81 m/s¬≤ * 0.7 m\\n   ‚âà 10.3 Joules\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;At this point, &lt;strong&gt;carpentry exists as potential&lt;/strong&gt; ‚Äî it is stored, waiting to become real.&lt;/p&gt;\\n\\n&lt;h1&gt;Step 2: Swing&lt;/h1&gt;\\n\\n&lt;p&gt;We now convert this potential carpentry into true carpentry via muscle contraction:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;v = ‚àö(2gh) ‚âà ‚àö(2 * 9.81 * 0.7) ‚âà 3.7 m/s\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;Carpentry reaches peak velocity. The wrist transmits the energy. The nail receives it.&lt;/p&gt;\\n\\n&lt;h1&gt;Step 3: Contact&lt;/h1&gt;\\n\\n&lt;p&gt;Impact time ‚âà 0.02 seconds\\nWe deliver momentum:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;Œîp = m * v = 1.5 * 3.7 = 5.55 kg¬∑m/s  \\nF = Œîp / Œît = 5.55 / 0.02 = 277.5 N\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;At the moment of contact, the entire concept of carpentry is realized in 20 milliseconds.&lt;/p&gt;\\n\\n&lt;p&gt;This is it. This is carpentry.&lt;/p&gt;\\n\\n&lt;h1&gt;Step 4: Tendon Load&lt;/h1&gt;\\n\\n&lt;p&gt;The tendons absorb the reaction. Here&amp;#39;s the rough tension in the forearm flexor:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;T ‚âà F * arm leverage compensation ‚âà 277.5 N * 1.1 ‚âà 305 N\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;h1&gt;Step 5: Muscle Energy&lt;/h1&gt;\\n\\n&lt;p&gt;Muscle efficiency ‚âà 25%, so:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;Energy burned = 10.3 J * 4 = 41.2 J per swing\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;60 swings per minute = 2472 J/min = 41.2 W&lt;/p&gt;\\n\\n&lt;h1&gt;Step 6: Conclusion&lt;/h1&gt;\\n\\n&lt;p&gt;People think carpentry is hard. But &lt;strong&gt;when you do the math it is actually simple&lt;/strong&gt; to understand.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1j0fc4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751747789,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fjlt3","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"kamikazikarl","can_mod_post":false,"created_utc":1751697087,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_127w7h","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Yeah, this is definitely something I need to take some more time to understand since I'm building a new app that needs this. Cherry-picking context without piping it out to and LLM to summarize every few messages just seems like the right way to go.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fjlt3","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yeah, this is definitely something I need to take some more time to understand since I&amp;#39;m building a new app that needs this. Cherry-picking context without piping it out to and LLM to summarize every few messages just seems like the right way to go.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fjlt3/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751697087,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1foj52","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Whole-Assignment6240","can_mod_post":false,"created_utc":1751699952,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_19zhptl2dm","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Love how this cuts through the usual RAG noise.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1foj52","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Love how this cuts through the usual RAG noise.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1foj52/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751699952,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fqesd","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"mission_tiefsee","can_mod_post":false,"created_utc":1751701081,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_1l0xi85fdm","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"&lt;3","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fqesd","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;&amp;lt;3&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fqesd/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751701081,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gr2d1","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"amroamroamro","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1ghujf","score":1,"author_fullname":"t2_f4uav","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I think there is overlap with MCP, the idea in both is to integrate external data sources into the LLM context, in that sense RAG is just another tool that LLM can call to fetch relevant external documents into the context","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1gr2d1","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I think there is overlap with MCP, the idea in both is to integrate external data sources into the LLM context, in that sense RAG is just another tool that LLM can call to fetch relevant external documents into the context&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gr2d1/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751721057,"author_flair_text":null,"treatment_tags":[],"created_utc":1751721057,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1ghujf","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"tkenben","can_mod_post":false,"created_utc":1751717027,"send_replies":true,"parent_id":"t1_n1gd0ql","score":1,"author_fullname":"t2_68phwzns","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"This is why I feel this is great for building FAQs and not much else - from my viewpoint as an end user. Meaning, it's not something that can benefit me directly. In order to properly construct a \\\\_useful\\\\_ vector space that does more than just a Levenshtein distance, I already have to know the material.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ghujf","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;This is why I feel this is great for building FAQs and not much else - from my viewpoint as an end user. Meaning, it&amp;#39;s not something that can benefit me directly. In order to properly construct a _useful_ vector space that does more than just a Levenshtein distance, I already have to know the material.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1ghujf/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751717027,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1gd0ql","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"amroamroamro","can_mod_post":false,"created_utc":1751714641,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_f4uav","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"basically use embedding to map both documents and queries into a high-dimension vector space that allows semantic similarity searches (using an operation like dot-product). When user submits a query, it is mapped and compared against stored documents using similarity measure to retrieve most relevant documents, which are then passed as context to the LLM to generate information-enhanced responses.\\n\\nit's really just applying the classical problem of [nearest neighbor search](https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods) to find relevant documents used to augment LLM context","edited":1751715302,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gd0ql","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;basically use embedding to map both documents and queries into a high-dimension vector space that allows semantic similarity searches (using an operation like dot-product). When user submits a query, it is mapped and compared against stored documents using similarity measure to retrieve most relevant documents, which are then passed as context to the LLM to generate information-enhanced responses.&lt;/p&gt;\\n\\n&lt;p&gt;it&amp;#39;s really just applying the classical problem of &lt;a href=\\"https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods\\"&gt;nearest neighbor search&lt;/a&gt; to find relevant documents used to augment LLM context&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gd0ql/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751714641,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gioi4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"deepsky88","can_mod_post":false,"created_utc":1751717418,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_9qdr2","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"The first numbers are generated on what?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gioi4","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;The first numbers are generated on what?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gioi4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751717418,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gkjnl","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Raz4r","can_mod_post":false,"created_utc":1751718278,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_108sov","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"People with a computer science background were doing things similar to RAG 10‚Äì40 years ago using techniques like SVD/LSA/LSI or LDA. They would take a set of sentences, learn a latent representation, and then use approximate nearest neighbors to retrieve the closest point to a query.\\n\\nOf course, modern approaches are vastly more effective, but the core idea remains essentially the same.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gkjnl","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;People with a computer science background were doing things similar to RAG 10‚Äì40 years ago using techniques like SVD/LSA/LSI or LDA. They would take a set of sentences, learn a latent representation, and then use approximate nearest neighbors to retrieve the closest point to a query.&lt;/p&gt;\\n\\n&lt;p&gt;Of course, modern approaches are vastly more effective, but the core idea remains essentially the same.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gkjnl/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751718278,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1gquxd","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"drink_with_me_to_day","can_mod_post":false,"created_utc":1751720973,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_bcl60","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Do you have code for the embeddings and normalize part using llama cpp?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1gquxd","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Do you have code for the embeddings and normalize part using llama cpp?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1gquxd/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751720973,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1hpgas","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Federal_Order4324","can_mod_post":false,"created_utc":1751732689,"send_replies":true,"parent_id":"t3_1lrsx20","score":1,"author_fullname":"t2_rlhobztpn","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"What im gathering from this is that making the \\"matching text\\" different to the actual content( ie. Make it a summary or list of keywords) to be inserted into context is preferred no?\\n\\nI've seen a couple RAG implementations that instead have the vector match be done with the actual content of the entry. In practice this kind of sucked. When I used it.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1hpgas","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;What im gathering from this is that making the &amp;quot;matching text&amp;quot; different to the actual content( ie. Make it a summary or list of keywords) to be inserted into context is preferred no?&lt;/p&gt;\\n\\n&lt;p&gt;I&amp;#39;ve seen a couple RAG implementations that instead have the vector match be done with the actual content of the entry. In practice this kind of sucked. When I used it.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1hpgas/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751732689,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fys3e","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ohdog","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1f1s7l","score":3,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Based on what?","edited":false,"author_flair_css_class":null,"name":"t1_n1fys3e","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Based on what?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fys3e/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706196,"author_flair_text":null,"collapsed":false,"created_utc":1751706196,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":3}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1hq5a8","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Federal_Order4324","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1f1s7l","score":1,"author_fullname":"t2_rlhobztpn","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"As in retrieval as a whole or just vector embeddings?","edited":false,"author_flair_css_class":null,"name":"t1_n1hq5a8","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;As in retrieval as a whole or just vector embeddings?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1hq5a8/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751732919,"author_flair_text":null,"collapsed":false,"created_utc":1751732919,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1f1s7l","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":"LOW_SCORE","no_follow":true,"author":"mycall","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1erm73","score":-6,"author_fullname":"t2_22rf5","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":true,"body":"Yes, RAG will go to the dustbins of history soon.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f1s7l","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yes, RAG will go to the dustbins of history soon.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":"comment score below threshold","distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1f1s7l/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751687685,"author_flair_text":null,"treatment_tags":[],"created_utc":1751687685,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":-6}}],"before":null}},"user_reports":[],"saved":false,"id":"n1erm73","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Strel0k","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1el8zp","score":12,"author_fullname":"t2_4s94u","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"No, the \\"retrieval\\" part of RAG doesn't need to be solely based on semantic similarly search, its just that RAG became popular when vector DBs + cosine similarity = very sexy agentic demos and LLMs were too dumb and context limited for anything else.\\n\\nTechnically speaking, almost all tool calling agents are doing retrieval augmented generation. So in effect the term RAG is just irrelevant.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1erm73","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;No, the &amp;quot;retrieval&amp;quot; part of RAG doesn&amp;#39;t need to be solely based on semantic similarly search, its just that RAG became popular when vector DBs + cosine similarity = very sexy agentic demos and LLMs were too dumb and context limited for anything else.&lt;/p&gt;\\n\\n&lt;p&gt;Technically speaking, almost all tool calling agents are doing retrieval augmented generation. So in effect the term RAG is just irrelevant.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1erm73/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751683071,"author_flair_text":null,"treatment_tags":[],"created_utc":1751683071,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":12}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fyxpt","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ohdog","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1el8zp","score":1,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Nope, it just means you are retrieving information to the context based on some method and then generating off of that, why would it be specifically about vector search? It's an architectural pattern.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1fyxpt","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Nope, it just means you are retrieving information to the context based on some method and then generating off of that, why would it be specifically about vector search? It&amp;#39;s an architectural pattern.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fyxpt/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706295,"author_flair_text":null,"treatment_tags":[],"created_utc":1751706295,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1el8zp","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"cleverusernametry","can_mod_post":false,"created_utc":1751680280,"send_replies":true,"parent_id":"t1_n1eiyo7","score":7,"author_fullname":"t2_17bfjs","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Isn't RAG equivalent to vector embeddings?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1el8zp","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Isn&amp;#39;t RAG equivalent to vector embeddings?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1el8zp/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751680280,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":7}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1j9f51","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"chitown160","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1iqpr7","score":1,"author_fullname":"t2_k7mcz","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"I build RAG applications to provide correct and exact answers - not to return likely or probable results some of the time. Too many people promoting Sex Panther Cologne solutions.","edited":false,"author_flair_css_class":null,"name":"t1_n1j9f51","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I build RAG applications to provide correct and exact answers - not to return likely or probable results some of the time. Too many people promoting Sex Panther Cologne solutions.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1j9f51/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751750765,"author_flair_text":null,"collapsed":false,"created_utc":1751750765,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1iqpr7","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ohdog","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1i4xku","score":1,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"There is no reason to think that such a generalization would hold in every case. Often vector search is part of the solution, but often it's not.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1iqpr7","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;There is no reason to think that such a generalization would hold in every case. Often vector search is part of the solution, but often it&amp;#39;s not.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1iqpr7/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751744580,"author_flair_text":null,"treatment_tags":[],"created_utc":1751744580,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1i4xku","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"chitown160","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1fzvtl","score":1,"author_fullname":"t2_k7mcz","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"If a RAG \\"works\\" with vector search it can made to work even better without vector search.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1i4xku","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;If a RAG &amp;quot;works&amp;quot; with vector search it can made to work even better without vector search.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1i4xku/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751737497,"author_flair_text":null,"treatment_tags":[],"created_utc":1751737497,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1fzvtl","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ohdog","can_mod_post":false,"created_utc":1751706899,"send_replies":true,"parent_id":"t1_n1eiyo7","score":1,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"RAG that works uses whatever method works best for the task at hand. It can be vector search and it can be something else.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fzvtl","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;RAG that works uses whatever method works best for the task at hand. It can be vector search and it can be something else.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fzvtl/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706899,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"distinguished":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fyi8v","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Ok_Warning2146","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1f6hkv","score":2,"author_fullname":"t2_s6sfw4yy","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Yeah. I can run 130m embedding on my 1030. Why do I need a bloated model to do the same thing?","edited":false,"author_flair_css_class":null,"name":"t1_n1fyi8v","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Yeah. I can run 130m embedding on my 1030. Why do I need a bloated model to do the same thing?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"link_id":"t3_1lrsx20","associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":null,"treatment_tags":[],"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fyi8v/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706026,"author_flair_text":null,"collapsed":false,"created_utc":1751706026,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":4,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":2}}],"before":null}},"user_reports":[],"saved":false,"id":"n1f6hkv","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"WitAndWonder","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1esuuh","score":16,"author_fullname":"t2_58u1t2z","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"My vector db can run a query on several million entries in 10ms, exclusively on CPU, and get perfectly accurate results for my semantic needs. Why on earth would you ever trade that for a full LLM solution which requires a 300B model and seconds to run any kind of query (also cost, if we're talking API / commercial scale)? The whole point of RAG is how efficient it is despite its incredible accuracy (at least when embedded well.)","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1f6hkv","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;My vector db can run a query on several million entries in 10ms, exclusively on CPU, and get perfectly accurate results for my semantic needs. Why on earth would you ever trade that for a full LLM solution which requires a 300B model and seconds to run any kind of query (also cost, if we&amp;#39;re talking API / commercial scale)? The whole point of RAG is how efficient it is despite its incredible accuracy (at least when embedded well.)&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1f6hkv/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751689988,"author_flair_text":null,"treatment_tags":[],"created_utc":1751689988,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":16}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fd5ut","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"Ylsid","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1esuuh","score":7,"author_fullname":"t2_6lmlc","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"But you can't run Gemini locally, right?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fd5ut","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;But you can&amp;#39;t run Gemini locally, right?&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fd5ut/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751693503,"author_flair_text":null,"treatment_tags":[],"created_utc":1751693503,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":7}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fyudf","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ohdog","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1esuuh","score":1,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Still RAG though. Also why would any of what you meantioned eliminate the need to retrieve additional information to the model context to generate good responses? How does the model magically know all the information internal to your company or project? It doesn't, and that is why you need RAG, vector DBs included.","edited":1751707541,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fyudf","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Still RAG though. Also why would any of what you meantioned eliminate the need to retrieve additional information to the model context to generate good responses? How does the model magically know all the information internal to your company or project? It doesn&amp;#39;t, and that is why you need RAG, vector DBs included.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fyudf/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706236,"author_flair_text":null,"treatment_tags":[],"created_utc":1751706236,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":3,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1esuuh","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":"LOW_SCORE","no_follow":true,"author":"Strel0k","can_mod_post":false,"send_replies":true,"parent_id":"t1_n1ena5u","score":-8,"author_fullname":"t2_4s94u","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"gemini-2.5 flash/pro in an agentic loop with tool calling and code execution (think grep and API calls) basically made vector DBs obsolete for majority of my use cases. Increased inference speeds and more capable smaller models will kill vector db based rag.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n1esuuh","is_submitter":false,"collapsed":true,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;gemini-2.5 flash/pro in an agentic loop with tool calling and code execution (think grep and API calls) basically made vector DBs obsolete for majority of my use cases. Increased inference speeds and more capable smaller models will kill vector db based rag.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":"comment score below threshold","distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1esuuh/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751683624,"author_flair_text":null,"treatment_tags":[],"created_utc":1751683624,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":-8}}],"before":null}},"user_reports":[],"saved":false,"id":"n1ena5u","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"angry_queef_master","can_mod_post":false,"created_utc":1751681160,"send_replies":true,"parent_id":"t1_n1eiyo7","score":1,"author_fullname":"t2_kctg798a","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Well, enlighten us on what works then.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1ena5u","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Well, enlighten us on what works then.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1ena5u/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751681160,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1eiyo7","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":"LOW_SCORE","no_follow":true,"author":"chitown160","can_mod_post":false,"created_utc":1751679276,"send_replies":true,"parent_id":"t3_1lrsx20","score":-6,"author_fullname":"t2_k7mcz","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":true,"body":"I have a hard time understanding why RAG tutorials and explanations seek to replicate web search techniques. RAG that works generally does not use embeddings, vector databases or similarity search.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1eiyo7","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I have a hard time understanding why RAG tutorials and explanations seek to replicate web search techniques. RAG that works generally does not use embeddings, vector databases or similarity search.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":"comment score below threshold","distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1eiyo7/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751679276,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":1,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":-6}},{"kind":"t1","data":{"total_awards_received":0,"approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"ups":-5,"removal_reason":null,"link_id":"t3_1lrsx20","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1fyoya","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":false,"author":"ohdog","can_mod_post":false,"created_utc":1751706141,"send_replies":true,"parent_id":"t1_n1ezuzc","score":4,"author_fullname":"t2_7zmam","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"The nuance is in the context aware embeddings, which didn't exist before LLM's.","edited":1751707475,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1fyoya","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;The nuance is in the context aware embeddings, which didn&amp;#39;t exist before LLM&amp;#39;s.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lrsx20","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1fyoya/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751706141,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":4}}],"before":null}},"user_reports":[],"saved":false,"id":"n1ezuzc","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":"DELETED","no_follow":true,"author":"[deleted]","can_mod_post":false,"send_replies":true,"parent_id":"t3_1lrsx20","score":-5,"approved_by":null,"report_reasons":null,"all_awardings":[],"subreddit_id":"t5_81eyvm","body":"[deleted]","edited":false,"downs":0,"author_flair_css_class":null,"collapsed":true,"is_submitter":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;[deleted]&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"associated_award":null,"stickied":false,"subreddit_type":"public","can_gild":false,"top_awarded_type":null,"unrepliable_reason":null,"author_flair_text_color":"dark","score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1ezuzc/","num_reports":null,"locked":false,"name":"t1_n1ezuzc","created":1751686793,"subreddit":"LocalLLaMA","author_flair_text":null,"treatment_tags":[],"created_utc":1751686793,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":"","collapsed_because_crowd_control":null,"mod_reports":[],"mod_note":null,"distinguished":null}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n1eolm6","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":"LOW_SCORE","no_follow":true,"author":"Different-Toe-955","can_mod_post":false,"created_utc":1751681729,"send_replies":true,"parent_id":"t3_1lrsx20","score":-14,"author_fullname":"t2_16thtphc23","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":true,"body":"Very cool. Lots of numbers. *woosh*","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1eolm6","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Very cool. Lots of numbers. &lt;em&gt;woosh&lt;/em&gt;&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":"comment score below threshold","distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lrsx20/how_rag_actually_works_a_toy_example_with_real/n1eolm6/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751681729,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lrsx20","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":-14}}],"before":null}}]`),n=()=>e.jsx(l,{data:t});export{n as default};
