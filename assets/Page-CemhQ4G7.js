import{j as e}from"./index-DFOnUtq9.js";import{R as t}from"./RedditPostRenderer-B-dx19nm.js";import"./index-CUOQn61u.js";const a=JSON.parse(`[{"kind":"Listing","data":{"after":null,"dist":1,"modhash":"","geo_filter":"","children":[{"kind":"t3","data":{"approved_at_utc":null,"subreddit":"LocalLLaMA","selftext":"We have a dozen rooms in our makerspace,  are trying to calculate occupancy heatmaps and collect general \\"is this space being utilized\\" data.   Has anybody used TensorFlow Lite or a \\"vision\\" LLM running locally to get an (approximate) count of people in a room using snapshots?\\n\\n\\nWe have mostly Amcrest \\"AI\\" cameras along with Seeed's 24Ghz mmwave \\"Human Static Presence\\" sensors.  In combination these are fairly accurate at binary yes/no detection of human occupancy, but do not offer people counting.   We have looked at other mmWave sensors, but they're expensive, and mostly can only count accurately to 3.    We can however set things up so a snapshot is captured from each AI camera anytime it sees an object that it identifies as a person.\\n\\n\\nUsing 5mp full-resolution snapshots we've found that the following prompt gives a fairly accurate (+/-1) count, including sitting and standing persons, without custom tuning of the model:\\n\\n     ollama run gemma3:4b  \\"Return as an integer the number of people in this image: ./snapshot-1234.jpg\\"\\n\\nUsing a cloud-based AI such as google Vision, Azure, or NVIDIA cloud is about as accurate, but faster than our local RTX4060 GPU.   Worst case response time for any of these options is ~7 seconds per frame analyzed, which is acceptable for our purpose (a dozen rooms, snapshots at most once every 5 minutes or so, only captured when a sensor or camera reports a room is not empty).\\n\\n**Any other recommended approaches**?   I assume a Coral Edge TPU would give an answer faster, but would TensorFlow Lite also be more accurate out-of-the box, or would we need to invest time and effort in tuning for each camera/scene?","user_reports":[],"saved":false,"mod_reason_title":null,"gilded":0,"clicked":false,"title":"Anybody using local LLM to augment in-camera person-detection for people counting?","link_flair_richtext":[{"e":"text","t":"Question | Help"}],"subreddit_name_prefixed":"r/LocalLLaMA","hidden":false,"pwls":6,"link_flair_css_class":"","downs":0,"thumbnail_height":null,"top_awarded_type":null,"hide_score":false,"name":"t3_1lqyabt","quarantine":false,"link_flair_text_color":"dark","upvote_ratio":1,"author_flair_background_color":null,"subreddit_type":"public","ups":6,"total_awards_received":0,"media_embed":{},"thumbnail_width":null,"author_flair_template_id":null,"is_original_content":false,"author_fullname":"t2_dv0swue7","secure_media":null,"is_reddit_media_domain":false,"is_meta":false,"category":null,"secure_media_embed":{},"link_flair_text":"Question | Help","can_mod_post":false,"score":6,"approved_by":null,"is_created_from_ads_ui":false,"author_premium":false,"thumbnail":"self","edited":false,"author_flair_css_class":null,"author_flair_richtext":[],"gildings":{},"content_categories":null,"is_self":true,"mod_note":null,"created":1751570295,"link_flair_type":"richtext","wls":6,"removed_by_category":null,"banned_by":null,"author_flair_type":"text","domain":"self.LocalLLaMA","allow_live_comments":false,"selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\\"md\\"&gt;&lt;p&gt;We have a dozen rooms in our makerspace,  are trying to calculate occupancy heatmaps and collect general &amp;quot;is this space being utilized&amp;quot; data.   Has anybody used TensorFlow Lite or a &amp;quot;vision&amp;quot; LLM running locally to get an (approximate) count of people in a room using snapshots?&lt;/p&gt;\\n\\n&lt;p&gt;We have mostly Amcrest &amp;quot;AI&amp;quot; cameras along with Seeed&amp;#39;s 24Ghz mmwave &amp;quot;Human Static Presence&amp;quot; sensors.  In combination these are fairly accurate at binary yes/no detection of human occupancy, but do not offer people counting.   We have looked at other mmWave sensors, but they&amp;#39;re expensive, and mostly can only count accurately to 3.    We can however set things up so a snapshot is captured from each AI camera anytime it sees an object that it identifies as a person.&lt;/p&gt;\\n\\n&lt;p&gt;Using 5mp full-resolution snapshots we&amp;#39;ve found that the following prompt gives a fairly accurate (+/-1) count, including sitting and standing persons, without custom tuning of the model:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt; ollama run gemma3:4b  &amp;quot;Return as an integer the number of people in this image: ./snapshot-1234.jpg&amp;quot;\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;Using a cloud-based AI such as google Vision, Azure, or NVIDIA cloud is about as accurate, but faster than our local RTX4060 GPU.   Worst case response time for any of these options is ~7 seconds per frame analyzed, which is acceptable for our purpose (a dozen rooms, snapshots at most once every 5 minutes or so, only captured when a sensor or camera reports a room is not empty).&lt;/p&gt;\\n\\n&lt;p&gt;&lt;strong&gt;Any other recommended approaches&lt;/strong&gt;?   I assume a Coral Edge TPU would give an answer faster, but would TensorFlow Lite also be more accurate out-of-the box, or would we need to invest time and effort in tuning for each camera/scene?&lt;/p&gt;\\n&lt;/div&gt;&lt;!-- SC_ON --&gt;","likes":null,"suggested_sort":null,"banned_at_utc":null,"view_count":null,"archived":false,"no_follow":false,"is_crosspostable":false,"pinned":false,"over_18":false,"all_awardings":[],"awarders":[],"media_only":false,"link_flair_template_id":"2c9831e6-bf92-11ed-98e6-d2b8bcc02ae1","can_gild":false,"spoiler":false,"locked":false,"author_flair_text":null,"treatment_tags":[],"visited":false,"removed_by":null,"num_reports":null,"distinguished":null,"subreddit_id":"t5_81eyvm","author_is_blocked":false,"mod_reason_by":null,"removal_reason":null,"link_flair_background_color":"#5a74cc","id":"1lqyabt","is_robot_indexable":true,"num_duplicates":0,"report_reasons":null,"author":"MHTMakerspace","discussion_type":null,"num_comments":8,"send_replies":true,"media":null,"contest_mode":false,"author_patreon_flair":false,"author_flair_text_color":null,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/","stickied":false,"url":"https://www.reddit.com/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/","subreddit_subscribers":494198,"created_utc":1751570295,"num_crossposts":0,"mod_reports":[],"is_video":false}}],"before":null}},{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n171ee4","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"MHTMakerspace","can_mod_post":false,"created_utc":1751576302,"send_replies":true,"parent_id":"t1_n16kcg7","score":1,"author_fullname":"t2_dv0swue7","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"&gt; I could swear I've read this post before years ago. Maybe deja vu.\\n\\nWe're almost certainly not the first budget-constrained non-profit to have this need and a spare gaming laptop to play with.\\n\\n&gt;I don't know about TPU's. I do know that larger images require more processing time. With a 320x240 image on CPU only, it's about 7 seconds. If you already have a nvidia chip, that should be fast enough.\\n\\nIn our gemma3:4b tests, using samples from a cluttered scene (lots of machine tools and stuff here), the answer is within +/-1 of the actual count.   Gemma3's ccuracy and compute time is about the same whether using an unmodified 5mp image, cropped and downsampled to 1mp, or even shrunk to 320x240.\\n\\nWe'll try YOLOv8 with the same GPU and same sample files, see how it fares.\\n\\n&gt;The problem I've had with the LLM is that it's almost like asking a small child to do it. It's more than capable and easy to set up, but it has a tendency to start making comments or doing something other than the one task I want it to do. Maybe I prompted it wrong, I don't know.\\n\\nIn our first couple of experiments with gemma3, it was being chatty.  We narrowed down the prompt and now it just spits out an integer without any commentary, like so:\\n\\n    ollama run gemma3:4b  \\"Return as an integer the number of people in this image: ./snapshot-202507030001.jpg\\"\\n    Added image './snapshot-202507030001.jpg'\\n    6\\n\\nSometimes, even for the same exact frame, it will say 5, or 7, but we don't need it to be perfect, an approximation is fine.\\n\\nInitial goal is to display a best-guess prediction for each room (workshop) when are the busy times for each day of the week, like [Google Maps' \\"Popular times\\" graph.](https://support.google.com/business/answer/6263531?hl=en)","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n171ee4","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;blockquote&gt;\\n&lt;p&gt;I could swear I&amp;#39;ve read this post before years ago. Maybe deja vu.&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;We&amp;#39;re almost certainly not the first budget-constrained non-profit to have this need and a spare gaming laptop to play with.&lt;/p&gt;\\n\\n&lt;blockquote&gt;\\n&lt;p&gt;I don&amp;#39;t know about TPU&amp;#39;s. I do know that larger images require more processing time. With a 320x240 image on CPU only, it&amp;#39;s about 7 seconds. If you already have a nvidia chip, that should be fast enough.&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;In our gemma3:4b tests, using samples from a cluttered scene (lots of machine tools and stuff here), the answer is within +/-1 of the actual count.   Gemma3&amp;#39;s ccuracy and compute time is about the same whether using an unmodified 5mp image, cropped and downsampled to 1mp, or even shrunk to 320x240.&lt;/p&gt;\\n\\n&lt;p&gt;We&amp;#39;ll try YOLOv8 with the same GPU and same sample files, see how it fares.&lt;/p&gt;\\n\\n&lt;blockquote&gt;\\n&lt;p&gt;The problem I&amp;#39;ve had with the LLM is that it&amp;#39;s almost like asking a small child to do it. It&amp;#39;s more than capable and easy to set up, but it has a tendency to start making comments or doing something other than the one task I want it to do. Maybe I prompted it wrong, I don&amp;#39;t know.&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;In our first couple of experiments with gemma3, it was being chatty.  We narrowed down the prompt and now it just spits out an integer without any commentary, like so:&lt;/p&gt;\\n\\n&lt;pre&gt;&lt;code&gt;ollama run gemma3:4b  &amp;quot;Return as an integer the number of people in this image: ./snapshot-202507030001.jpg&amp;quot;\\nAdded image &amp;#39;./snapshot-202507030001.jpg&amp;#39;\\n6\\n&lt;/code&gt;&lt;/pre&gt;\\n\\n&lt;p&gt;Sometimes, even for the same exact frame, it will say 5, or 7, but we don&amp;#39;t need it to be perfect, an approximation is fine.&lt;/p&gt;\\n\\n&lt;p&gt;Initial goal is to display a best-guess prediction for each room (workshop) when are the busy times for each day of the week, like &lt;a href=\\"https://support.google.com/business/answer/6263531?hl=en\\"&gt;Google Maps&amp;#39; &amp;quot;Popular times&amp;quot; graph.&lt;/a&gt;&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lqyabt","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n171ee4/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751576302,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n16kcg7","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"Red_Redditor_Reddit","can_mod_post":false,"created_utc":1751571247,"send_replies":true,"parent_id":"t3_1lqyabt","score":1,"author_fullname":"t2_8eelmfjg","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"I could swear I've read this post before years ago.  Maybe deja vu.\\n\\nI've tried using LLM's to sort animals where I live.  I haven't had the time to properly set up in the field, but I've tested it by having it sort construction workers.\\n\\nThe problem I've had with the LLM is that it's almost like asking a small child to do it.  It's more than capable and easy to set up, but it has a tendency to start making comments or doing something other than the one task I want it to do.  Maybe I prompted it wrong, I don't know.\\n\\nI don't know about TPU's.  I do know that larger images require more processing time.  With a 320x240 image on CPU only, it's about 7 seconds.  If you already have a nvidia chip, that should be fast enough.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n16kcg7","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;I could swear I&amp;#39;ve read this post before years ago.  Maybe deja vu.&lt;/p&gt;\\n\\n&lt;p&gt;I&amp;#39;ve tried using LLM&amp;#39;s to sort animals where I live.  I haven&amp;#39;t had the time to properly set up in the field, but I&amp;#39;ve tested it by having it sort construction workers.&lt;/p&gt;\\n\\n&lt;p&gt;The problem I&amp;#39;ve had with the LLM is that it&amp;#39;s almost like asking a small child to do it.  It&amp;#39;s more than capable and easy to set up, but it has a tendency to start making comments or doing something other than the one task I want it to do.  Maybe I prompted it wrong, I don&amp;#39;t know.&lt;/p&gt;\\n\\n&lt;p&gt;I don&amp;#39;t know about TPU&amp;#39;s.  I do know that larger images require more processing time.  With a 320x240 image on CPU only, it&amp;#39;s about 7 seconds.  If you already have a nvidia chip, that should be fast enough.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n16kcg7/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751571247,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lqyabt","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n16w3rd","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"MHTMakerspace","can_mod_post":false,"created_utc":1751574731,"send_replies":true,"parent_id":"t1_n16kikn","score":1,"author_fullname":"t2_dv0swue7","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"&gt; Using an LLM seems like the wrong tool for the job\\n\\nWas looking at LLM options mostly because we already had ollama installed and working, and because the free cloud services with predictable quotas and reasonable overage pricing seem to all be LLM-based.\\n\\n&gt; I don't understand the part where you ask about Tensorflow Lite. That's a software library and not a model or application\\n\\nTensorFlow Lite was suggested by a member as a way to use a (cheap) Edge TPU coprocessor with YOLO.   It is not just for phones, Axis supports converting TFL models to run directly on some cameras, and Google and Asus sell Linux dev boards with Coral embedded, as well as add-on cards for USB, M2, etc.","edited":1751576378,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n16w3rd","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;blockquote&gt;\\n&lt;p&gt;Using an LLM seems like the wrong tool for the job&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;Was looking at LLM options mostly because we already had ollama installed and working, and because the free cloud services with predictable quotas and reasonable overage pricing seem to all be LLM-based.&lt;/p&gt;\\n\\n&lt;blockquote&gt;\\n&lt;p&gt;I don&amp;#39;t understand the part where you ask about Tensorflow Lite. That&amp;#39;s a software library and not a model or application&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;TensorFlow Lite was suggested by a member as a way to use a (cheap) Edge TPU coprocessor with YOLO.   It is not just for phones, Axis supports converting TFL models to run directly on some cameras, and Google and Asus sell Linux dev boards with Coral embedded, as well as add-on cards for USB, M2, etc.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lqyabt","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n16w3rd/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751574731,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n16kikn","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"eloquentemu","can_mod_post":false,"created_utc":1751571298,"send_replies":true,"parent_id":"t3_1lqyabt","score":1,"author_fullname":"t2_lpdsy","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Using an LLM seems like the wrong tool for the job, but I guess it's minimal effort.  There are a lot of freely available vision models that can handle person tracking. I think YOLOv8 is one of the more popular and can be tuned for your space.  I haven't deployed it myself but I think it'll run in real time on a 4060.\\n\\nI don't understand the part where you ask about Tensorflow Lite. That's a software library and not a model or application and more for phones than 4060s.  LLM slop?","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n16kikn","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Using an LLM seems like the wrong tool for the job, but I guess it&amp;#39;s minimal effort.  There are a lot of freely available vision models that can handle person tracking. I think YOLOv8 is one of the more popular and can be tuned for your space.  I haven&amp;#39;t deployed it myself but I think it&amp;#39;ll run in real time on a 4060.&lt;/p&gt;\\n\\n&lt;p&gt;I don&amp;#39;t understand the part where you ask about Tensorflow Lite. That&amp;#39;s a software library and not a model or application and more for phones than 4060s.  LLM slop?&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n16kikn/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751571298,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lqyabt","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":{"kind":"Listing","data":{"after":null,"dist":null,"modhash":"","geo_filter":"","children":[{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n18wr44","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"godndiogoat","can_mod_post":false,"send_replies":true,"parent_id":"t1_n189hdv","score":1,"author_fullname":"t2_1o8b7or53v","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"For quick room-level headcounts, YOLOv7-tiny trained on CrowdHuman run via the Ultralytics CLI (-m yolov7-tiny.pt) beats YOLOv8 people.pt on back-facing bodies and keeps about 18 fps on an RTX 4060. Grab a handful of snapshots, pass --save-txt to log box counts, and you’re done-no label tweaking needed. If you need an edge box, tflite EfficientDet-lite3 compiled for Coral runs around 25 ms per frame at 640p, though accuracy dips once you hit more than eight people. DeepStream’s PeopleNet v2 is another solid choice; the docker-compose build publishes MQTT counts straight into Grafana. I bounced between Ultralytics, DeepStream, and APIWrapper.ai’s wrapper scripts, and settled on the first because it was one command and no surprises.\\n\\nStick with YOLOv7-tiny plus the Ultralytics CLI if you want something you can drop in today and mostly forget.","edited":false,"top_awarded_type":null,"downs":0,"author_flair_css_class":null,"name":"t1_n18wr44","is_submitter":false,"collapsed":false,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;For quick room-level headcounts, YOLOv7-tiny trained on CrowdHuman run via the Ultralytics CLI (-m yolov7-tiny.pt) beats YOLOv8 people.pt on back-facing bodies and keeps about 18 fps on an RTX 4060. Grab a handful of snapshots, pass --save-txt to log box counts, and you’re done-no label tweaking needed. If you need an edge box, tflite EfficientDet-lite3 compiled for Coral runs around 25 ms per frame at 640p, though accuracy dips once you hit more than eight people. DeepStream’s PeopleNet v2 is another solid choice; the docker-compose build publishes MQTT counts straight into Grafana. I bounced between Ultralytics, DeepStream, and APIWrapper.ai’s wrapper scripts, and settled on the first because it was one command and no surprises.&lt;/p&gt;\\n\\n&lt;p&gt;Stick with YOLOv7-tiny plus the Ultralytics CLI if you want something you can drop in today and mostly forget.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lqyabt","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n18wr44/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751600332,"author_flair_text":null,"treatment_tags":[],"created_utc":1751600332,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":2,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n189hdv","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"MHTMakerspace","can_mod_post":false,"created_utc":1751591356,"send_replies":true,"parent_id":"t1_n1823nu","score":1,"author_fullname":"t2_dv0swue7","removal_reason":null,"approved_by":null,"mod_note":null,"all_awardings":[],"body":"Any recommendation on a specific yolo model or just a CLI tool to test YOLOv8 with snapshots the way we've been using ollama?\\n\\n&gt;but there's no way you're going to get an LLM to accurately count people by itself.\\n\\nI thought so initially too, but in terms of counting the number of people present in a still image, gemma3:4b with our ultra-simple test prompt was acceptable, as was the cloud-workflow version of [NVIDIAI Vila](https://github.com/NVlabs/VILA).\\n\\nNot looking for scientific accuracy, just something more accurate than our best mmWave option, the  Aqarea FP2, which can only accurately count to 3.  We don't have a budget to add additional cameras at every doorway and our 120-year-old building is enough of a warren that keeping a running entry/exit tally is not viable.\\n\\nGemma (local) and Vila (cloud API) both gave much better out-of-the-box results with our real world camera sample snapshots than the handful of YOLOv8 models we've tried (using the same sample images uploaded to Roboflow Universe).   First impression is that the pre-built Roboverse open source computer vision models claiming people counting are primarily looking for faces, -- a person with their back to the camera does not count (doesn't show up with a bounding box, doesn't add to the total).\\n\\nUltimately, we're looking for something we can deploy relatively quickly on hardware that we either already own (RTX) or can get cheap (Coral TPU) and then not have to continually tune over time -- our makerspace team all have plenty of hobbies already (including data analytics),  not looking to take on a new hobby of fine-tuning models.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n189hdv","is_submitter":true,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Any recommendation on a specific yolo model or just a CLI tool to test YOLOv8 with snapshots the way we&amp;#39;ve been using ollama?&lt;/p&gt;\\n\\n&lt;blockquote&gt;\\n&lt;p&gt;but there&amp;#39;s no way you&amp;#39;re going to get an LLM to accurately count people by itself.&lt;/p&gt;\\n&lt;/blockquote&gt;\\n\\n&lt;p&gt;I thought so initially too, but in terms of counting the number of people present in a still image, gemma3:4b with our ultra-simple test prompt was acceptable, as was the cloud-workflow version of &lt;a href=\\"https://github.com/NVlabs/VILA\\"&gt;NVIDIAI Vila&lt;/a&gt;.&lt;/p&gt;\\n\\n&lt;p&gt;Not looking for scientific accuracy, just something more accurate than our best mmWave option, the  Aqarea FP2, which can only accurately count to 3.  We don&amp;#39;t have a budget to add additional cameras at every doorway and our 120-year-old building is enough of a warren that keeping a running entry/exit tally is not viable.&lt;/p&gt;\\n\\n&lt;p&gt;Gemma (local) and Vila (cloud API) both gave much better out-of-the-box results with our real world camera sample snapshots than the handful of YOLOv8 models we&amp;#39;ve tried (using the same sample images uploaded to Roboflow Universe).   First impression is that the pre-built Roboverse open source computer vision models claiming people counting are primarily looking for faces, -- a person with their back to the camera does not count (doesn&amp;#39;t show up with a bounding box, doesn&amp;#39;t add to the total).&lt;/p&gt;\\n\\n&lt;p&gt;Ultimately, we&amp;#39;re looking for something we can deploy relatively quickly on hardware that we either already own (RTX) or can get cheap (Coral TPU) and then not have to continually tune over time -- our makerspace team all have plenty of hobbies already (including data analytics),  not looking to take on a new hobby of fine-tuning models.&lt;/p&gt;\\n&lt;/div&gt;","gildings":{},"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"link_id":"t3_1lqyabt","unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n189hdv/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751591356,"author_flair_text":null,"treatment_tags":[],"collapsed":false,"subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":1,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}},"user_reports":[],"saved":false,"id":"n1823nu","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"croninsiglos","can_mod_post":false,"created_utc":1751588583,"send_replies":true,"parent_id":"t3_1lqyabt","score":1,"author_fullname":"t2_v7qje","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Second vote for one of the yolo models or something like sam2 for instance segmentation. You can certainly use the LLM to interpret the end result coming out of the first model... but there's no way you're going to get an LLM to accurately count people by itself. The +/- 1 you're getting now is pure luck. Even Gemma 27B struggles at counting instances.\\n\\nIt doesn't have to be complicated... like this for example:  https://pastebin.com/5Pa7hrNb (vibe coded by Claude)","edited":1751590048,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n1823nu","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Second vote for one of the yolo models or something like sam2 for instance segmentation. You can certainly use the LLM to interpret the end result coming out of the first model... but there&amp;#39;s no way you&amp;#39;re going to get an LLM to accurately count people by itself. The +/- 1 you&amp;#39;re getting now is pure luck. Even Gemma 27B struggles at counting instances.&lt;/p&gt;\\n\\n&lt;p&gt;It doesn&amp;#39;t have to be complicated... like this for example:  &lt;a href=\\"https://pastebin.com/5Pa7hrNb\\"&gt;https://pastebin.com/5Pa7hrNb&lt;/a&gt; (vibe coded by Claude)&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n1823nu/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751588583,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lqyabt","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}},{"kind":"t1","data":{"subreddit_id":"t5_81eyvm","approved_at_utc":null,"author_is_blocked":false,"comment_type":null,"awarders":[],"mod_reason_by":null,"banned_by":null,"author_flair_type":"text","total_awards_received":0,"subreddit":"LocalLLaMA","author_flair_template_id":null,"likes":null,"replies":"","user_reports":[],"saved":false,"id":"n18bfvk","banned_at_utc":null,"mod_reason_title":null,"gilded":0,"archived":false,"collapsed_reason_code":null,"no_follow":true,"author":"ParticularLazy2965","can_mod_post":false,"created_utc":1751592092,"send_replies":true,"parent_id":"t3_1lqyabt","score":1,"author_fullname":"t2_s1ob1r5b","approved_by":null,"mod_note":null,"all_awardings":[],"collapsed":false,"body":"Check Frigate NVR out.","edited":false,"top_awarded_type":null,"author_flair_css_class":null,"name":"t1_n18bfvk","is_submitter":false,"downs":0,"author_flair_richtext":[],"author_patreon_flair":false,"body_html":"&lt;div class=\\"md\\"&gt;&lt;p&gt;Check Frigate NVR out.&lt;/p&gt;\\n&lt;/div&gt;","removal_reason":null,"collapsed_reason":null,"distinguished":null,"associated_award":null,"stickied":false,"author_premium":false,"can_gild":false,"gildings":{},"unrepliable_reason":null,"author_flair_text_color":null,"score_hidden":false,"permalink":"/r/LocalLLaMA/comments/1lqyabt/anybody_using_local_llm_to_augment_incamera/n18bfvk/","subreddit_type":"public","locked":false,"report_reasons":null,"created":1751592092,"author_flair_text":null,"treatment_tags":[],"link_id":"t3_1lqyabt","subreddit_name_prefixed":"r/LocalLLaMA","controversiality":0,"depth":0,"author_flair_background_color":null,"collapsed_because_crowd_control":null,"mod_reports":[],"num_reports":null,"ups":1}}],"before":null}}]`),s=()=>e.jsx(t,{data:a});export{s as default};
