[
  {
    "kind": "Listing",
    "data": {
      "after": null,
      "dist": 1,
      "modhash": "",
      "geo_filter": "",
      "children": [
        {
          "kind": "t3",
          "data": {
            "approved_at_utc": null,
            "subreddit": "LocalLLaMA",
            "selftext": "We have been working with various versions of Nemotron-Super-49B over the past few weeks, and have been running into some layer distribution issues with the model. This issue persists on the builds regardless of version (v1 or the latest v1_5, and regardless of quant size)\n\nOur setup is built around 3x 3090’s, and we have been working with ik_llama.cpp via docker to load in the LLM at the latest Q8_X_L quant with 32k context. \n\nWhen the model loads in, we get the following (rough) VRAM usage distribution:\n23.x Gb VRAM on GPU 0\n12.x Gb VRAM on GPU 1\n16.x Gb VRAM on GPU 2\n\nThis is all pre kv cache allocation, so the model crashes due to OOM based on these allocations.\nIs there anything behind the scenes on this particular model as to why it allocates layers in this manner? Is there any particular way to redistribute across the GPUs more evenly?",
            "user_reports": [],
            "saved": false,
            "mod_reason_title": null,
            "gilded": 0,
            "clicked": false,
            "title": "Nemotron Super – GPU VRAM Allocations",
            "link_flair_richtext": [
              {
                "e": "text",
                "t": "Question | Help"
              }
            ],
            "subreddit_name_prefixed": "r/LocalLLaMA",
            "hidden": false,
            "pwls": 6,
            "link_flair_css_class": "",
            "downs": 0,
            "thumbnail_height": null,
            "top_awarded_type": null,
            "hide_score": false,
            "name": "t3_1mesgsv",
            "quarantine": false,
            "link_flair_text_color": "dark",
            "upvote_ratio": 0.4,
            "author_flair_background_color": null,
            "subreddit_type": "public",
            "ups": 0,
            "total_awards_received": 0,
            "media_embed": {},
            "thumbnail_width": null,
            "author_flair_template_id": null,
            "is_original_content": false,
            "author_fullname": "t2_1ur7l8mv3w",
            "secure_media": null,
            "is_reddit_media_domain": false,
            "is_meta": false,
            "category": null,
            "secure_media_embed": {},
            "link_flair_text": "Question | Help",
            "can_mod_post": false,
            "score": 0,
            "approved_by": null,
            "is_created_from_ads_ui": false,
            "author_premium": false,
            "thumbnail": "self",
            "edited": false,
            "author_flair_css_class": null,
            "author_flair_richtext": [],
            "gildings": {},
            "content_categories": null,
            "is_self": true,
            "mod_note": null,
            "created": 1754042591,
            "link_flair_type": "richtext",
            "wls": 6,
            "removed_by_category": null,
            "banned_by": null,
            "author_flair_type": "text",
            "domain": "self.LocalLLaMA",
            "allow_live_comments": false,
            "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;We have been working with various versions of Nemotron-Super-49B over the past few weeks, and have been running into some layer distribution issues with the model. This issue persists on the builds regardless of version (v1 or the latest v1_5, and regardless of quant size)&lt;/p&gt;\n\n&lt;p&gt;Our setup is built around 3x 3090’s, and we have been working with ik_llama.cpp via docker to load in the LLM at the latest Q8_X_L quant with 32k context. &lt;/p&gt;\n\n&lt;p&gt;When the model loads in, we get the following (rough) VRAM usage distribution:\n23.x Gb VRAM on GPU 0\n12.x Gb VRAM on GPU 1\n16.x Gb VRAM on GPU 2&lt;/p&gt;\n\n&lt;p&gt;This is all pre kv cache allocation, so the model crashes due to OOM based on these allocations.\nIs there anything behind the scenes on this particular model as to why it allocates layers in this manner? Is there any particular way to redistribute across the GPUs more evenly?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;",
            "likes": null,
            "suggested_sort": null,
            "banned_at_utc": null,
            "view_count": null,
            "archived": false,
            "no_follow": true,
            "is_crosspostable": false,
            "pinned": false,
            "over_18": false,
            "all_awardings": [],
            "awarders": [],
            "media_only": false,
            "link_flair_template_id": "2c9831e6-bf92-11ed-98e6-d2b8bcc02ae1",
            "can_gild": false,
            "spoiler": false,
            "locked": false,
            "author_flair_text": null,
            "treatment_tags": [],
            "visited": false,
            "removed_by": null,
            "num_reports": null,
            "distinguished": null,
            "subreddit_id": "t5_81eyvm",
            "author_is_blocked": false,
            "mod_reason_by": null,
            "removal_reason": null,
            "link_flair_background_color": "#5a74cc",
            "id": "1mesgsv",
            "is_robot_indexable": true,
            "num_duplicates": 0,
            "report_reasons": null,
            "author": "Dependent_Yard8507",
            "discussion_type": null,
            "num_comments": 1,
            "send_replies": true,
            "media": null,
            "contest_mode": false,
            "author_patreon_flair": false,
            "author_flair_text_color": null,
            "permalink": "/r/LocalLLaMA/comments/1mesgsv/nemotron_super_gpu_vram_allocations/",
            "stickied": false,
            "url": "https://www.reddit.com/r/LocalLLaMA/comments/1mesgsv/nemotron_super_gpu_vram_allocations/",
            "subreddit_subscribers": 508192,
            "created_utc": 1754042591,
            "num_crossposts": 0,
            "mod_reports": [],
            "is_video": false
          }
        }
      ],
      "before": null
    }
  },
  {
    "kind": "Listing",
    "data": {
      "after": null,
      "dist": null,
      "modhash": "",
      "geo_filter": "",
      "children": [],
      "before": null
    }
  }
]